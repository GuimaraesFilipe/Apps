webpackHotUpdate("bundle",{

/***/ "./home/home.component.ts":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = __webpack_require__("../node_modules/@angular/core/fesm5/core.js");
const router_1 = __webpack_require__("../node_modules/@nativescript/angular/router/index.js");
const app_component_1 = __webpack_require__("./app.component.ts");
const utils = __webpack_require__("../node_modules/@nativescript/core/utils/utils.js");
const frame_1 = __webpack_require__("../node_modules/@nativescript/core/ui/frame/frame.js");
const platform_1 = __webpack_require__("../node_modules/@nativescript/core/platform/platform.js");
var utilityModule = __webpack_require__("../node_modules/@nativescript/core/utils/utils.js");
const app = __webpack_require__("../node_modules/@nativescript/core/application/application.js");
const http_get_services_1 = __webpack_require__("./home/http-get.services.ts");
const http_1 = __webpack_require__("../node_modules/@angular/common/fesm5/http.js");
let HomeComponent = class HomeComponent {
    constructor(http, myService, routerExtensions, appcomponent) {
        this.http = http;
        this.myService = myService;
        this.routerExtensions = routerExtensions;
        this.appcomponent = appcomponent;
        this.isBusy = true;
        this.result = [];
        this.result2 = [];
        this.result3 = [];
        this.result4 = [];
        this.resultSelected = [];
        this.suggestions = [];
        this.filtered = [];
        this.filtered2 = [];
        this.SelectedFiltered = [];
        this.selected = [];
        this.url = "<url>";
        this.value = utils.isDataURI(this.url);
        this.movie_show = "";
        this.sum = 0;
        this.sumTotal = 0;
        this.sumDeaths = 0;
        this.sumpop = 0;
        this.sumactive = 0;
        this.sumrecovered = 0;
        this.isNotLoggedIn = true;
        this.isHomepage = true;
        this.red = true;
        this.green = true;
        this.orange = true;
        this.medHerbSup = [];
        this.isNotSearch = true;
        this.frame = frame_1.Frame.getFrameById("myFrame");
        this.isScan = true;
    }
    onBusyChanged(args) {
        let indicator = args.object;
        console.log("indicator.busy changed to: " + indicator.busy);
    }
    ngOnInit() {
        this.extractOnAir();
        this.extractTrendingMovies();
    }
    onDrawerButtonTap() {
        const sideDrawer = app.getRootView();
        sideDrawer.showDrawer();
        console.log("drawer1");
    }
    onGetDataSuccess(res) {
        for (let key in res.response) {
            this.result.push({ value: res.response[key] });
            console.log("this array", this.result);
        }
    }
    onScroll(args) {
        const scrollView = args.object;
    }
    extractOnAir() {
        const result = { "tv_results": [
                {
                    "title": "Yowis Ben: The Series",
                    "imdb_id": "tt13039042",
                    "year": "2020"
                },
                {
                    "title": "To kafe tis Haras",
                    "imdb_id": "tt0384745",
                    "year": "2003"
                },
                {
                    "title": "Bettys Diagnose",
                    "imdb_id": "tt4310426",
                    "year": "2015"
                },
                {
                    "title": "Drága örökösök",
                    "imdb_id": "tt9480432",
                    "year": "2019"
                },
                {
                    "title": "Haute Dog",
                    "imdb_id": "tt13064206",
                    "year": "2020"
                },
                {
                    "title": "The Amber Ruffin Show",
                    "imdb_id": "tt11058078",
                    "year": "2020"
                },
                {
                    "title": "Magic of Disney's Animal Kingdom",
                    "imdb_id": "tt10196378",
                    "year": "2020"
                },
                {
                    "title": "Zehu Ze",
                    "imdb_id": "tt0077108",
                    "year": "1978"
                },
                {
                    "title": "The School Nurse Files",
                    "imdb_id": "tt12879522",
                    "year": "2020"
                }
            ] };
        this.onGetStatics(result);
    }
    onGetStatics(res) {
        for (let key in res.tv_results) {
            this.result2.push({ value: res.tv_results[key] });
        }
        this.result2.forEach(obj => {
            this.extractImage(obj.value.imdb_id);
        });
    }
    extractImage(value) {
        this.myService.getImageName(value)
            .subscribe((result) => {
            this.onGetImage(result);
        }, (error) => {
            console.log(error);
        });
    }
    onGetImage(res) {
        for (let key in res) {
            this.filtered.push({ image: res });
            this.result = this.filtered.reduce((acc, current) => {
                const x = acc.find(item => item.image === current.image);
                if (!x) {
                    return acc.concat([current]);
                }
                else {
                    return acc;
                }
            }, []);
        }
    }
    extractTrendingMovies() {
        console.log("this is the extract Trending Movies");
        const result = {
            "movie_results": [
                {
                    "title": "Don't Read This On a Plane",
                    "year": "0",
                    "imdb_id": "tt7525792"
                },
                {
                    "title": "Brutus Vs César",
                    "year": "2020",
                    "imdb_id": "tt10557524"
                },
                {
                    "imdb_id": "tt0423713",
                    "title": "Plus belle la vie",
                    "year": "2004"
                }
            ]
        };
        this.onGetTrendingMovies(result);
    }
    onGetTrendingMovies(res) {
        for (let key in res.movie_results) {
            this.result3.push({ value: res.movie_results[key] });
        }
        this.result3.forEach(obj => {
            this.extractImage2(obj.value.imdb_id);
        });
    }
    extractImage2(value) {
        this.myService.getImageName2(value)
            .subscribe((result) => {
            this.onGetImage2(result);
        }, (error) => {
            console.log(error);
        });
    }
    onGetImage2(res) {
        for (let key in res) {
            this.filtered2.push({ image: res });
            this.result4 = this.filtered2.reduce((acc, current) => {
                const x = acc.find(item => item.image === current.image);
                if (!x) {
                    return acc.concat([current]);
                }
                else {
                    return acc;
                }
            }, []);
        }
        this.random = this.result4[Math.floor(Math.random() * 2)].image.poster;
        console.log(this.random);
    }
    selectedSearch(args) {
        this.resultSelected = [];
        this.SelectedFiltered = [];
        this.movie_show = "";
        let selected = args.object.bindingContext;
        this.movie_show = selected.image.id;
        this.isHomepage = !this.isHomepage;
        console.log(' got MOvieShow', this.movie_show);
        this.extractSelectMovieShow(this.movie_show);
    }
    extractSelectMovieShow(value) {
        console.log("this is the extract Selected movieShows");
        this.myService.getSelectedMovieShow(value)
            .subscribe((result) => {
            this.onGetSelectMovieShow(result);
        }, (error) => {
            console.log(error);
        });
    }
    onGetSelectMovieShow(res) {
        for (let key in res) {
            this.SelectedFiltered.push({ value: res });
        }
        this.resultSelected = this.SelectedFiltered.reduce((acc, current) => {
            const x = acc.find(item => item.image === current.image);
            if (!x) {
                return acc.concat([current]);
            }
            else {
                return acc;
            }
        }, []);
        console.log("resulting in ", this.resultSelected);
    }
    onHomeTap() {
        this.routerExtensions.navigate(["/home"]);
        if (!this.isHomepage) {
            this.isHomepage = !this.isHomepage;
        }
    }
    onHistoryTap() {
        this.routerExtensions.navigate(["/history"]);
    }
    dismissKeyboard() {
        if (platform_1.isIOS) {
            UIApplication.sharedApplication.keyWindow.endEditing(true);
        }
        if (platform_1.isAndroid) {
            utils.ad.dismissSoftInput();
        }
    }
};
HomeComponent.ctorParameters = () => [
    { type: http_1.HttpClient },
    { type: http_get_services_1.MyHttpGetService2 },
    { type: router_1.RouterExtensions },
    { type: app_component_1.AppComponent }
];
__decorate([
    core_1.ViewChild("movieShow", { static: false }),
    __metadata("design:type", core_1.ElementRef)
], HomeComponent.prototype, "movieShow", void 0);
__decorate([
    core_1.ViewChild("med2", { static: false }),
    __metadata("design:type", core_1.ElementRef)
], HomeComponent.prototype, "med2", void 0);
__decorate([
    core_1.ViewChild("med3", { static: false }),
    __metadata("design:type", core_1.ElementRef)
], HomeComponent.prototype, "med3", void 0);
HomeComponent = __decorate([
    core_1.Component({
        selector: "Home",
        template: __importDefault(__webpack_require__("./home/home.component.html")).default,
        styles: [__importDefault(__webpack_require__("./home/home.component.css")).default]
    }),
    core_1.Injectable(),
    __metadata("design:paramtypes", [http_1.HttpClient, http_get_services_1.MyHttpGetService2, router_1.RouterExtensions, app_component_1.AppComponent])
], HomeComponent);
exports.HomeComponent = HomeComponent;


/***/ })

})
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ob21lL2hvbWUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ0Esa0ZBQXFGO0FBQ3JGLDhGQUErRDtBQUMvRCxrRUFBNEM7QUFFNUMsdUZBQXNEO0FBQ3RELDRGQUEyRTtBQUczRSxrR0FBNkQ7QUFDN0QsSUFBSSxhQUFhLEdBQUcsbUJBQU8sQ0FBQyxtREFBYSxDQUFDLENBQUM7QUFFM0MsaUdBQW9EO0FBQ3BELCtFQUF3RDtBQUV4RCxvRkFBMkU7QUFlM0UsSUFBYSxhQUFhLEdBQTFCLE1BQWEsYUFBYTtJQWlEdEIsWUFBb0IsSUFBZ0IsRUFBUyxTQUE0QixFQUFVLGdCQUFrQyxFQUFVLFlBQTBCO1FBQXJJLFNBQUksR0FBSixJQUFJLENBQVk7UUFBUyxjQUFTLEdBQVQsU0FBUyxDQUFtQjtRQUFVLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFBVSxpQkFBWSxHQUFaLFlBQVksQ0FBYztRQS9DM0osV0FBTSxHQUFZLElBQUksQ0FBQztRQUVyQixXQUFNLEdBQWUsRUFBRSxDQUFDO1FBQ3hCLFlBQU8sR0FBZSxFQUFFLENBQUM7UUFDekIsWUFBTyxHQUFlLEVBQUUsQ0FBQztRQUN6QixZQUFPLEdBQWUsRUFBRSxDQUFDO1FBQ3pCLG1CQUFjLEdBQWUsRUFBRSxDQUFDO1FBQ2hDLGdCQUFXLEdBQWUsRUFBRSxDQUFDO1FBQzdCLGFBQVEsR0FBZSxFQUFFLENBQUM7UUFDMUIsY0FBUyxHQUFlLEVBQUUsQ0FBQztRQUMzQixxQkFBZ0IsR0FBZSxFQUFFLENBQUM7UUFHbEMsYUFBUSxHQUFrQixFQUFFLENBQUM7UUFFNUIsUUFBRyxHQUFXLE9BQU8sQ0FBQztRQUN2QixVQUFLLEdBQVcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFJekMsZUFBVSxHQUFDLEVBQUUsQ0FBQztRQUNmLFFBQUcsR0FBRyxDQUFDLENBQUM7UUFDUixhQUFRLEdBQUcsQ0FB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QUFDLFdBQVcsRUFBQyxFQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUMsQ0FBQzs4QkFBWSxpQkFBVTtnREFBQztBQUN6QjtJQUFuQyxnQkFBUyxDQUFDLE1BQU0sRUFBRSxFQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUMsQ0FBQzs4QkFBTyxpQkFBVTsyQ0FBQztBQUNsQjtJQUFsQyxnQkFBUyxDQUFDLE1BQU0sRUFBQyxFQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUMsQ0FBQzs4QkFBTyxpQkFBVTsyQ0FBQztBQXJCNUMsYUFBYTtJQVJ6QixnQkFBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLE1BQU07UUFFaEIsb0ZBQW9DOztLQUV2QyxDQUFDO0lBQ0QsaUJBQVUsRUFBRTtxQ0FtRGlCLGlCQUFVLEVBQW9CLHFDQUFpQixFQUE0Qix5QkFBZ0IsRUFBd0IsNEJBQVk7R0FqRGhKLGFBQWEsQ0FrZXpCO0FBbGVZLHNDQUFhIiwiZmlsZSI6ImJ1bmRsZS4xYjdiMzUzYmM5NjQ1MmQzMjcwNi5ob3QtdXBkYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VhcmNoQmFyIH0gZnJvbSBcInVpL3NlYXJjaC1iYXJcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIEluamVjdGFibGUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgUm91dGVyRXh0ZW5zaW9ucyB9IGZyb20gXCJuYXRpdmVzY3JpcHQtYW5ndWxhci9yb3V0ZXJcIjtcbmltcG9ydCB7QXBwQ29tcG9uZW50fSBmcm9tIFwifi9hcHAuY29tcG9uZW50XCJcbmltcG9ydCB7IFNjcm9sbFZpZXcsIFNjcm9sbEV2ZW50RGF0YSB9IGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL3VpL3Njcm9sbC12aWV3XCI7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy91dGlscy91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0RnJhbWVCeUlkLCBGcmFtZSwgRXZlbnREYXRhIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvZnJhbWVcIjtcbmltcG9ydCB7IFRva2VuTW9kZWwsIEF1dG9Db21wbGV0ZUV2ZW50RGF0YSB9IGZyb20gXCJuYXRpdmVzY3JpcHQtdWktYXV0b2NvbXBsZXRlXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlQXJyYXkgfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9kYXRhL29ic2VydmFibGUtYXJyYXlcIjtcbmltcG9ydCB7IGlzSU9TLCBpc0FuZHJvaWQgfSBmcm9tICd0bnMtY29yZS1tb2R1bGVzL3BsYXRmb3JtJztcbnZhciB1dGlsaXR5TW9kdWxlID0gcmVxdWlyZShcInV0aWxzL3V0aWxzXCIpO1xuZGVjbGFyZSBjb25zdCBVSUFwcGxpY2F0aW9uO1xuaW1wb3J0ICogYXMgYXBwIGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL2FwcGxpY2F0aW9uXCI7XG5pbXBvcnQgeyBNeUh0dHBHZXRTZXJ2aWNlMiB9IGZyb20gXCIuL2h0dHAtZ2V0LnNlcnZpY2VzXCI7ICBcbmltcG9ydCB7IFJhZFNpZGVEcmF3ZXIgfSBmcm9tIFwibmF0aXZlc2NyaXB0LXVpLXNpZGVkcmF3ZXJcIjtcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zIH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vbi9odHRwXCI7XG5pbXBvcnQgeyBBY3Rpdml0eUluZGljYXRvciB9IGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL3VpL2FjdGl2aXR5LWluZGljYXRvclwiO1xuaW1wb3J0IHsgQW55VHh0UmVjb3JkIH0gZnJvbSBcImRuc1wiO1xuaW1wb3J0IHsgZ2V0U3RyaW5nIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvYXBwbGljYXRpb24tc2V0dGluZ3NcIjtcbmltcG9ydCB7IExpc3RWaWV3RXZlbnREYXRhIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC11aS1saXN0dmlld1wiO1xuXG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiBcIkhvbWVcIixcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgIHRlbXBsYXRlVXJsOiBcIi4vaG9tZS5jb21wb25lbnQuaHRtbFwiLFxuICAgIHN0eWxlVXJsczogWycuL2hvbWUuY29tcG9uZW50LmNzcyddXG59KVxuQEluamVjdGFibGUoKVxuXG5leHBvcnQgY2xhc3MgSG9tZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgaXNCdXN5OiBib29sZWFuID0gdHJ1ZTtcbiAgICByYW5kb206IGFueTtcbiAgICByZXN1bHQ6IEFycmF5PGFueT4gPSBbXTsgXG4gICAgcmVzdWx0MjogQXJyYXk8YW55PiA9IFtdOyBcbiAgICByZXN1bHQzOiBBcnJheTxhbnk+ID0gW107IFxuICAgIHJlc3VsdDQ6IEFycmF5PGFueT4gPSBbXTsgXG4gICAgcmVzdWx0U2VsZWN0ZWQ6IEFycmF5PGFueT4gPSBbXTsgXG4gICAgc3VnZ2VzdGlvbnM6IEFycmF5PGFueT4gPSBbXTtcbiAgICBmaWx0ZXJlZDogQXJyYXk8YW55PiA9IFtdO1xuICAgIGZpbHRlcmVkMjogQXJyYXk8YW55PiA9IFtdO1xuICAgIFNlbGVjdGVkRmlsdGVyZWQ6IEFycmF5PGFueT4gPSBbXTtcbiAgICBzdWdnZXN0OiBPYnNlcnZhYmxlQXJyYXk8VG9rZW5Nb2RlbD47XG4gIFx0ZGI6IGFueTtcbiAgICBzZWxlY3RlZDogQXJyYXk8T2JqZWN0PiA9IFtdO1xuICAgIHVzZXJfaWQ6IHN0cmluZztcbiAgICAgdXJsOiBzdHJpbmcgPSBcIjx1cmw+XCI7IFxuICAgIHZhbHVlOmJvb2xlYW4gPSB1dGlscy5pc0RhdGFVUkkodGhpcy51cmwpO1xuICAgIEBWaWV3Q2hpbGQoXCJtb3ZpZVNob3dcIix7c3RhdGljOiBmYWxzZX0pIG1vdmllU2hvdzogRWxlbWVudFJlZjtcbiAgICAgQFZpZXdDaGlsZChcIm1lZDJcIiwge3N0YXRpYzogZmFsc2V9KSBtZWQyOiBFbGVtZW50UmVmO1xuICAgICBAVmlld0NoaWxkKFwibWVkM1wiLHtzdGF0aWM6IGZhbHNlfSkgbWVkMzogRWxlbWVudFJlZjtcbiAgICAgbW92aWVfc2hvdz1cIlwiO1xuICAgIHN1bSA9IDA7XG4gICAgc3VtVG90YWwgPSAwO1xuICAgIHN1bURlYXRocyA9IDA7XG4gICAgc3VtcG9wPTA7XG4gICAgc3VtYWN0aXZlPTA7XG4gICAgc3VtcmVjb3ZlcmVkPTA7XG4gICAgaXNOb3RMb2dnZWRJbj0gdHJ1ZTtcbiAgICBpc0hvbWVwYWdlID0gdHJ1ZTtcbiAgICByZWQ9dHJ1ZTtcbiAgICBncmVlbj10cnVlO1xuICAgIG9yYW5nZT10cnVlO1xuICAgIGNyZWF0ZUFuZFVwZGF0ZTogYW55O1xuICAgIG1lZEhlcmJTdXA6IEFycmF5PE9iamVjdD4gPSBbXTtcbiAgICBpc05vdFNlYXJjaD0gdHJ1ZTtcbiAgICBmcmFtZSA9IEZyYW1lLmdldEZyYW1lQnlJZChcIm15RnJhbWVcIik7XG4gICAgaXNTY2FuPXRydWU7XG5cbiAgICBcblxuXG4gICAgb25CdXN5Q2hhbmdlZChhcmdzOiBFdmVudERhdGEpIHtcbiAgICAgIGxldCBpbmRpY2F0b3I6IEFjdGl2aXR5SW5kaWNhdG9yID0gPEFjdGl2aXR5SW5kaWNhdG9yPmFyZ3Mub2JqZWN0O1xuICAgICAgY29uc29sZS5sb2coXCJpbmRpY2F0b3IuYnVzeSBjaGFuZ2VkIHRvOiBcIiArIGluZGljYXRvci5idXN5KTtcbiAgfVxuICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LHByaXZhdGUgbXlTZXJ2aWNlOiBNeUh0dHBHZXRTZXJ2aWNlMiwgcHJpdmF0ZSByb3V0ZXJFeHRlbnNpb25zOiBSb3V0ZXJFeHRlbnNpb25zLCBwcml2YXRlIGFwcGNvbXBvbmVudDogQXBwQ29tcG9uZW50KSB7XG5cbiAgICAgIFxuXG4gICAgICAgXG4gICAgfSBcbiAgICBcblxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgXG4gICAgICAvLyB0aGlzLmV4dHJhY3REYXRhKCk7XG4gICAgICB0aGlzLmV4dHJhY3RPbkFpcigpO1xuICAgICAgdGhpcy5leHRyYWN0VHJlbmRpbmdNb3ZpZXMoKTtcbiAgICAgIC8vIHRoaXMuc2VsZWN0SXRlbXMoKTtcbiAgICB9XG4gIC8vICAgZXh0cmFjdERhdGEoKSB7XG4gIC8vICAgICB0aGlzLm15U2VydmljZS5nZXRBbGwoKVxuICAvLyAgICAgICAgIC5zdWJzY3JpYmUoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAvLyAgICAgICAgICAgICB0aGlzLnN1Z2dlc3Rpb24ocmVzdWx0KTtcbiAgICAgICAgICAgICAgXG4gIC8vICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gIC8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgLy8gICAgICAgICB9KTtcbiAgLy8gfVxuICBcbi8vICAgc2VsZWN0SXRlbXMoKSB7XG4vLyAgICAgdGhpcy5kaXNtaXNzS2V5Ym9hcmQoKTtcbiAgIFxuLy8gICAgIGlmICghdGhpcy5pc0hvbWVwYWdlKXtcbi8vICAgICAgIHRoaXMucmVzdWx0PVtdO1xuLy8gICAgICAgdGhpcy5teVNlcnZpY2UuZ2V0SW5mbygpXG4gICBcbi8vICAgICAgIC5zdWJzY3JpYmUoKHJlc3VsdCkgPT4ge1xuICAgIFxuLy8gICAgICAgICBjb25zb2xlLmxvZyhcInRoaXMgaXMgdGhlIG9iamVjdFwiLHJlc3VsdClcbi8vICAgICAgICAgdGhpcy5vbkdldERhdGFTdWNjZXNzKHJlc3VsdClcbiAgICAgICAgICBcbiAgICAgICAgICBcbi8vICAgICAgIH0sIChlcnJvcikgPT4ge1xuLy8gICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbi8vICAgICAgIH0pO1xuXG4vLyAgICAgfVxuLy8gICAgIGVsc2V7XG4vLyAgICAgICB0aGlzLmlzSG9tZXBhZ2UgPSAhdGhpcy5pc0hvbWVwYWdlO1xuLy8gICAgICAgdGhpcy5teVNlcnZpY2UuZ2V0SW5mbygpXG4gICBcbi8vICAgICAgIC5zdWJzY3JpYmUoKHJlc3VsdCkgPT4ge1xuICAgIFxuLy8gICAgICAgICBjb25zb2xlLmxvZyhcInRoaXMgaXMgdGhlIG9iamVjdFwiLHJlc3VsdClcbi8vICAgICAgICAgdGhpcy5vbkdldERhdGFTdWNjZXNzKHJlc3VsdClcbiAgICAgICAgICBcbiAgICAgICAgICBcbi8vICAgICAgIH0sIChlcnJvcikgPT4ge1xuLy8gICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbi8vICAgICAgIH0pO1xuLy8gICAgIH1cbiAgXG5cbi8vIH0gXG5cbm9uRHJhd2VyQnV0dG9uVGFwKCk6IHZvaWQgeyBcbiAgY29uc3Qgc2lkZURyYXdlciA9IDxSYWRTaWRlRHJhd2VyPmFwcC5nZXRSb290VmlldygpO1xuICBzaWRlRHJhd2VyLnNob3dEcmF3ZXIoKTtcbiAgY29uc29sZS5sb2coXCJkcmF3ZXIxXCIpXG4gIFxufVxuXG5wcml2YXRlIG9uR2V0RGF0YVN1Y2Nlc3MocmVzKSB7XG5cbmZvciAobGV0IGtleSBpbiByZXMucmVzcG9uc2UpIHtcbiAgdGhpcy5yZXN1bHQucHVzaCh7dmFsdWU6IHJlcy5yZXNwb25zZVtrZXldfSk7XG4gIGNvbnNvbGUubG9nKFwidGhpcyBhcnJheVwiLCB0aGlzLnJlc3VsdCk7XG59XG5cbiAgfVxuICBvblNjcm9sbChhcmdzOiBTY3JvbGxFdmVudERhdGEpIHtcbiAgICBjb25zdCBzY3JvbGxWaWV3ID0gYXJncy5vYmplY3QgYXMgU2Nyb2xsVmlldztcblxuICAgIC8vIGNvbnNvbGUubG9nKFwic2Nyb2xsWDogXCIgKyBhcmdzLnNjcm9sbFgpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwic2Nyb2xsWTogXCIgKyBhcmdzLnNjcm9sbFkpO1xufVxuXG5leHRyYWN0T25BaXIoKSB7XG4gIC8vIGNvbnNvbGUubG9nKFwidGhpcyBpcyB0aGUgZXh0cmFjdFwiKVxuICAvLyB0aGlzLm15U2VydmljZS5nZXRPbkFpcigpXG4gIC8vICAgICAuc3Vic2NyaWJlKChyZXN1bHQpID0+IHtcbiAgLy8gICAgICAgY29uc29sZS5sb2coXCJPTiBBSVIgT04gQUlSIE9OIEFJUlwiLCByZXN1bHQpXG4gICAgICAgIGNvbnN0IHJlc3VsdD0geyAgXCJ0dl9yZXN1bHRzXCI6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcInRpdGxlXCI6IFwiWW93aXMgQmVuOiBUaGUgU2VyaWVzXCIsXG4gICAgICAgICAgICBcImltZGJfaWRcIjogXCJ0dDEzMDM5MDQyXCIsXG4gICAgICAgICAgICAgXCJ5ZWFyXCI6IFwiMjAyMFwiXG4gICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICBcInRpdGxlXCI6IFwiVG8ga2FmZSB0aXMgSGFyYXNcIixcbiAgICAgICAgICAgXCJpbWRiX2lkXCI6IFwidHQwMzg0NzQ1XCIsXG4gICAgICAgICAgICBcInllYXJcIjogXCIyMDAzXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwidGl0bGVcIjogXCJCZXR0eXMgRGlhZ25vc2VcIixcbiAgICAgICAgICAgIFwiaW1kYl9pZFwiOiBcInR0NDMxMDQyNlwiLFxuICAgICAgICAgICAgXCJ5ZWFyXCI6IFwiMjAxNVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICAge1xuICAgICAgICAgICAgIFwidGl0bGVcIjogXCJEcsOhZ2Egw7Zyw7Zrw7Zzw7ZrXCIsXG4gICAgICAgICAgIFwiaW1kYl9pZFwiOiBcInR0OTQ4MDQzMlwiLFxuICAgICAgICAgICBcInllYXJcIjogXCIyMDE5XCJcbiAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgIFwidGl0bGVcIjogXCJIYXV0ZSBEb2dcIixcbiAgICAgICAgICAgXCJpbWRiX2lkXCI6IFwidHQxMzA2NDIwNlwiLFxuICAgICAgICAgICBcInllYXJcIjogXCIyMDIwXCJcbiAgICAgICAgICB9LFxuICAgICAgICAge1xuICAgICAgICAgIFwidGl0bGVcIjogXCJUaGUgQW1iZXIgUnVmZmluIFNob3dcIixcbiAgICAgICAgICAgIFwiaW1kYl9pZFwiOiBcInR0MTEwNTgwNzhcIixcbiAgICAgICAgICAgICBcInllYXJcIjogXCIyMDIwXCJcbiAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIk1hZ2ljIG9mIERpc25leSdzIEFuaW1hbCBLaW5nZG9tXCIsXG4gICAgICAgICAgIFwiaW1kYl9pZFwiOiBcInR0MTAxOTYzNzhcIixcbiAgICAgICAgICBcInllYXJcIjogXCIyMDIwXCJcbiAgICAgICAgIH0sXG4gICAgICAgICB7XG4gICAgICAgICAgIFwidGl0bGVcIjogXCJaZWh1IFplXCIsXG4gICAgICAgICAgIFwiaW1kYl9pZFwiOiBcInR0MDA3NzEwOFwiLFxuICAgICAgICAgICAgXCJ5ZWFyXCI6IFwiMTk3OFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcInRpdGxlXCI6IFwiVGhlIFNjaG9vbCBOdXJzZSBGaWxlc1wiLFxuICAgICAgICAgICAgXCJpbWRiX2lkXCI6IFwidHQxMjg3OTUyMlwiLFxuICAgICAgICAgICAgXCJ5ZWFyXCI6IFwiMjAyMFwiXG4gICAgICAgICAgfV19XG4gICAgICAgICAgdGhpcy5vbkdldFN0YXRpY3MocmVzdWx0KTtcbiAgICAgICAgICBcbiAgICAgIC8vIH0sIChlcnJvcikgPT4ge1xuICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIC8vIH0pO1xufVxuXG5wcml2YXRlIG9uR2V0U3RhdGljcyhyZXMpIHtcbiAgXG4gXG5cbiAgZm9yIChsZXQga2V5IGluIHJlcy50dl9yZXN1bHRzKSB7XG4gICAgXG4gICAgdGhpcy5yZXN1bHQyLnB1c2goe3ZhbHVlOiByZXMudHZfcmVzdWx0c1trZXldfSk7XG4gIFxuICAgIC8vIGNvbnNvbGUubG9nKFwicmVzdWx0aW5nIGluIFwiLHRoaXMucmVzdWx0Mik7XG4gIFxuICBcbiAgfVxuICBcbiAgdGhpcy5yZXN1bHQyLmZvckVhY2gob2JqID0+IHtcbiAgICB0aGlzLmV4dHJhY3RJbWFnZShvYmoudmFsdWUuaW1kYl9pZCk7XG4gICB9KTtcbiAgXG4gIFxuICBcbiAgICB9XG4gICAgZXh0cmFjdEltYWdlKHZhbHVlKSB7XG5cbiAgICAgIHRoaXMubXlTZXJ2aWNlLmdldEltYWdlTmFtZSh2YWx1ZSlcbiAgICAgICAgICAuc3Vic2NyaWJlKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGhpcyBpcyB0aGUgaW1hZ2UgcmVzdWx0IFwiLCByZXN1bHQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgdGhpcy5vbkdldEltYWdlKHJlc3VsdCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBcbiAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAgb25HZXRJbWFnZShyZXMpIHtcbiAgICAgIFxuICAgIFxuICAgICAgZm9yIChsZXQga2V5IGluIHJlcykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5maWx0ZXJlZC5wdXNoKHtpbWFnZTogcmVzfSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiSU1BR0UgUkVzdWx0IFwiLHRoaXMucmVzdWx0KTtcbiAgICBcbiAgICAgICAgdGhpcy5yZXN1bHQ9IHRoaXMuZmlsdGVyZWQucmVkdWNlKChhY2MsIGN1cnJlbnQpID0+IHtcbiAgICAgICAgICBjb25zdCB4ID0gYWNjLmZpbmQoaXRlbSA9PiBpdGVtLmltYWdlID09PSBjdXJyZW50LmltYWdlKTtcbiAgICAgICAgICBpZiAoIXgpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2MuY29uY2F0KFtjdXJyZW50XSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaWx0ZXJlZCcsIHRoaXMuZmlsdGVyZWQpO1xuICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXG4gICAgICBcbiAgICAgIFxuICAgICAgICB9XG5cbmV4dHJhY3RUcmVuZGluZ01vdmllcygpIHtcbiAgY29uc29sZS5sb2coXCJ0aGlzIGlzIHRoZSBleHRyYWN0IFRyZW5kaW5nIE1vdmllc1wiKVxuICAvLyB0aGlzLm15U2VydmljZS5nZXRUcmVuZGluZ01vdmllcygpXG4gIC8vICAgICAuc3Vic2NyaWJlKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJUUkVORElOZyBUUkVORElOR1wiLCByZXN1bHQpXG4gICAgICAgIGNvbnN0IHJlc3VsdD0gIHtcbiAgICAgICAgICBcIm1vdmllX3Jlc3VsdHNcIjogW1xuICAgICAgICBcbiAgICAgICAgICAge1xuICAgICAgICAgICAgIFwidGl0bGVcIjogXCJEb24ndCBSZWFkIFRoaXMgT24gYSBQbGFuZVwiLFxuICAgICAgICAgIFwieWVhclwiOiBcIjBcIixcbiAgICAgICAgICAgIFwiaW1kYl9pZFwiOiBcInR0NzUyNTc5MlwiXG4gICAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgICAge1xuICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIkJydXR1cyBWcyBDw6lzYXJcIixcbiAgICAgICAgICAgIFwieWVhclwiOiBcIjIwMjBcIixcbiAgICAgICAgICAgIFwiaW1kYl9pZFwiOiBcInR0MTA1NTc1MjRcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgXCJpbWRiX2lkXCI6XCJ0dDA0MjM3MTNcIixcbiAgICAgICAgICAgIFwidGl0bGVcIjpcIlBsdXMgYmVsbGUgbGEgdmllXCIsXG4gICAgICAgICAgICBcInllYXJcIjpcIjIwMDRcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICAgICAgICB9ICAgICAgICBcbiAgICAgICAgICB0aGlzLm9uR2V0VHJlbmRpbmdNb3ZpZXMocmVzdWx0KTtcbiAgICAgICAgICBcbiAgICAgIC8vIH0sIChlcnJvcikgPT4ge1xuICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIC8vIH0pO1xufVxuXG5wcml2YXRlIG9uR2V0VHJlbmRpbmdNb3ZpZXMocmVzKSB7XG4gIFxuIFxuXG4gIGZvciAobGV0IGtleSBpbiByZXMubW92aWVfcmVzdWx0cykge1xuICAgIFxuICAgIHRoaXMucmVzdWx0My5wdXNoKHt2YWx1ZTogcmVzLm1vdmllX3Jlc3VsdHNba2V5XX0pO1xuICBcbiAgICAvLyBjb25zb2xlLmxvZyhcInJlc3VsdGluZyBpbiBcIix0aGlzLnJlc3VsdDIpO1xuICBcbiAgXG4gIH1cbiAgXG4gIHRoaXMucmVzdWx0My5mb3JFYWNoKG9iaiA9PiB7XG4gICAgdGhpcy5leHRyYWN0SW1hZ2UyKG9iai52YWx1ZS5pbWRiX2lkKTtcbiAgIH0pO1xuICBcbiAgXG4gIFxuICAgIH1cblxuICAgIGV4dHJhY3RJbWFnZTIodmFsdWUpIHtcblxuICAgICAgdGhpcy5teVNlcnZpY2UuZ2V0SW1hZ2VOYW1lMih2YWx1ZSlcbiAgICAgICAgICAuc3Vic2NyaWJlKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGhpcyBpcyB0aGUgaW1hZ2UgcmVzdWx0IFwiLCByZXN1bHQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgdGhpcy5vbkdldEltYWdlMihyZXN1bHQpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgIG9uR2V0SW1hZ2UyKHJlcykge1xuICAgICAgXG4gICAgXG4gICAgICBmb3IgKGxldCBrZXkgaW4gcmVzKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmZpbHRlcmVkMi5wdXNoKHtpbWFnZTogcmVzfSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiSU1BR0UgUkVzdWx0IFwiLHRoaXMucmVzdWx0KTtcbiAgICBcbiAgICAgICAgdGhpcy5yZXN1bHQ0PSB0aGlzLmZpbHRlcmVkMi5yZWR1Y2UoKGFjYywgY3VycmVudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHggPSBhY2MuZmluZChpdGVtID0+IGl0ZW0uaW1hZ2UgPT09IGN1cnJlbnQuaW1hZ2UpO1xuICAgICAgICAgIGlmICgheCkge1xuICAgICAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW2N1cnJlbnRdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICB9XG4gICAgICAgIH0sIFtdKTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZpbHRlcmVkJywgdGhpcy5maWx0ZXJlZCk7XG4gICAgIFxuICAgICAgICBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgXG5cblxuXG5cblxuICAgICAgdGhpcy5yYW5kb209dGhpcy5yZXN1bHQ0W01hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkqMildLmltYWdlLnBvc3RlcjtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMucmFuZG9tKVxuICAgICAgXG4gICAgICAgIH1cbiAgICAgXG5cblxuICAgXG4vLyAgICAgZ2V0SW1hZ2VOYW1lKHZhbHVlKSB7XG4vLyAgICAgICB2YXIgbG93ZXI9dmFsdWUuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcbi8vICAgICAgIGNvbnNvbGUubG9nKGxvd2VyKTtcbi8vICAgICAgIHJldHVybiBgfi9pbWFnZXMvJHtsb3dlcn0ucG5nYDtcbi8vICAgfVxuXG5cblxuXG4gIFxuXG4gICBcbi8vIGFkZEludGVyYWN0aW9uKG1lZEhlcmJTdXA6IHN0cmluZykge1xuLy8gICBjb25zb2xlLmxvZyhcImFkZCBtZWRIZXJiU3VwXCIsIG1lZEhlcmJTdXApXG4vLyAgICAgZGlhbG9ncy5hY3Rpb24oe1xuLy8gICAgICAgIHRpdGxlOiBcIkFyZSB5b3Ugc3VyZSB0aGF0IHlvdSB3YW50IHRvIGFkZCB0aGlzIG1lZGljaW5lIHRvIHlvdXIgbGlzdD9cIixcbi8vICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiBcIkNhbmNlbFwiLFxuLy8gICAgICAgYWN0aW9uczogW1wiWWVzXCIsIFwiTm9cIl1cbi8vICAgICB9KS50aGVuKHJlc3VsdCA9PiB7XG4vLyAgICAgICBpZiAocmVzdWx0ID09IFwiWWVzXCIpIHtcbi8vICAgICAgICB0aGlzLm1lZEhlcmJTdXBfbmFtZSA9IG1lZEhlcmJTdXA7XG4vLyAgICAgICAgdGhpcy5tZWRpY2luZV9mb3JtID0gXCJQaWxsXCI7XG4vLyAgICAgICAgIHRoaXMuZGIuZXhlY1NRTChcIklOU0VSVCBJTlRPIG1lZGljaW5lcyAobWVkaWNpbmVzX25hbWUsIG1lZGljaW5lX2Rvc2FnZSwgbWVkaWNpbmVfZm9ybSwgbWVkaWNpbmVfZnJlcXVlbmN5LCB1c2VyX2lkKSBWQUxVRVMgKD8sPyw/LD8sPylcIiwgW3RoaXMubWVkSGVyYlN1cF9uYW1lLCB0aGlzLm1lZGljaW5lX2Rvc2FnZSwgdGhpcy5tZWRpY2luZV9mb3JtLCB0aGlzLm1lZGljaW5lX2ZyZXF1ZW5jeSwgdGhpcy51c2VyX2lkXSkudGhlbihpZCA9PiB7XG4vLyAgICAgICAgICAgIHRoaXMubWVkaWNpbmVMaXN0LnVuc2hpZnQoe2lkOiBpZCwgbmFtZTogdGhpcy5tZWRIZXJiU3VwX25hbWUsIGRvc2FnZTogdGhpcy5tZWRpY2luZV9kb3NhZ2UsIGZvcm06IHRoaXMubWVkaWNpbmVfZm9ybSwgZnJlcXVlbmN5OnRoaXMubWVkaWNpbmVfZnJlcXVlbmN5fSk7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiIGFkZGluZyB3YXMgYSBzdWNlc3NcIiwgdGhpcy5tZWRpY2luZUxpc3QpO1xuLy8gICAgICAgICAgICBkaWFsb2dzLmFsZXJ0KCdNZWRpY2luZSBzYXZlZCBzdWNjZXNzZnVsbHk6Jyk7XG4gICAgICAgICAgIFxuLy8gICAgICAgIH0sIGVycm9yID0+IHtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIGFkZGluZyBhbiBpdGVtIHRvIHlvdXIgbGlzdC4nLCBlcnJvcik7XG4vLyAgICAgICAgICAgIHRoaXMubWVkSGVyYlN1cF9uYW1lID0gXCJcIjtcbi8vICAgICAgICAgICAgdGhpcy5tZWRpY2luZV9kb3NhZ2UgPSBcIlwiO1xuLy8gICAgICAgICAgICB0aGlzLm1lZGljaW5lX2Zvcm0gPSBcIlwiO1xuLy8gICAgICAgICAgICB0aGlzLm1lZGljaW5lX2ZyZXF1ZW5jeSA9IFwiXCI7XG4vLyAgICAgICAgfSk7XG5cbi8vICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09IFwiTm9cIikge1xuICAgICAgIFxuLy8gICAgICAgfVxuLy8gICAgIH0pO1xuLy8gICAgfVxuXG5zZWxlY3RlZFNlYXJjaChhcmdzOiBMaXN0Vmlld0V2ZW50RGF0YSkge1xuICB0aGlzLnJlc3VsdFNlbGVjdGVkID0gW107XG4gIHRoaXMuU2VsZWN0ZWRGaWx0ZXJlZD1bXTtcbiAgdGhpcy5tb3ZpZV9zaG93PVwiXCI7XG5sZXQgc2VsZWN0ZWQ9IDxhbnk+YXJncy5vYmplY3QuYmluZGluZ0NvbnRleHQ7XG50aGlzLm1vdmllX3Nob3c9c2VsZWN0ZWQuaW1hZ2UuaWQ7XG4gIHRoaXMuaXNIb21lcGFnZSA9ICF0aGlzLmlzSG9tZXBhZ2U7XG4gY29uc29sZS5sb2coJyBnb3QgTU92aWVTaG93JywgdGhpcy5tb3ZpZV9zaG93KTtcbiB0aGlzLmV4dHJhY3RTZWxlY3RNb3ZpZVNob3codGhpcy5tb3ZpZV9zaG93KTtcblxufVxuXG5leHRyYWN0U2VsZWN0TW92aWVTaG93KHZhbHVlKSB7XG4gIGNvbnNvbGUubG9nKFwidGhpcyBpcyB0aGUgZXh0cmFjdCBTZWxlY3RlZCBtb3ZpZVNob3dzXCIpXG4gIHRoaXMubXlTZXJ2aWNlLmdldFNlbGVjdGVkTW92aWVTaG93KHZhbHVlKVxuICAgICAgLnN1YnNjcmliZSgocmVzdWx0KSA9PiB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGhpcyBpcyB0aGUgcmVzdWx0XCIsIHJlc3VsdClcbiAgICAgICAgXG4gICAgICAgICAgdGhpcy5vbkdldFNlbGVjdE1vdmllU2hvdyhyZXN1bHQpO1xuICAgICAgICAgIFxuICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfSk7XG59XG5cbnByaXZhdGUgb25HZXRTZWxlY3RNb3ZpZVNob3cocmVzKSB7XG4gIFxuIFxuXG4gIGZvciAobGV0IGtleSBpbiByZXMpIHtcbiAgICBcbiAgICBcbiAgICB0aGlzLlNlbGVjdGVkRmlsdGVyZWQucHVzaCh7dmFsdWU6IHJlc30pO1xuICBcbiAgICBcbiAgXG4gIFxuICB9XG4gIHRoaXMucmVzdWx0U2VsZWN0ZWQ9IHRoaXMuU2VsZWN0ZWRGaWx0ZXJlZC5yZWR1Y2UoKGFjYywgY3VycmVudCkgPT4ge1xuICAgIGNvbnN0IHggPSBhY2MuZmluZChpdGVtID0+IGl0ZW0uaW1hZ2UgPT09IGN1cnJlbnQuaW1hZ2UpO1xuICAgIGlmICgheCkge1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW2N1cnJlbnRdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9XG4gIH0sIFtdKTtcbiAgXG4gIFxuICBjb25zb2xlLmxvZyhcInJlc3VsdGluZyBpbiBcIix0aGlzLnJlc3VsdFNlbGVjdGVkKTtcbiAgXG4gIFxuICAgIH1cblxuICAgICBcbiAgIFxuICAgIG9uSG9tZVRhcCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yb3V0ZXJFeHRlbnNpb25zLm5hdmlnYXRlKFtcIi9ob21lXCJdKTtcbiAgICAgICAgaWYoIXRoaXMuaXNIb21lcGFnZSl7XG4gICAgICAgICAgdGhpcy5pc0hvbWVwYWdlPSF0aGlzLmlzSG9tZXBhZ2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25IaXN0b3J5VGFwKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJvdXRlckV4dGVuc2lvbnMubmF2aWdhdGUoW1wiL2hpc3RvcnlcIl0pO1xuICBcbiAgICB9XG5cblxuICAgIFxuICAgICBcbiAgICBcblxuICAgXG4gICAgICBkaXNtaXNzS2V5Ym9hcmQoKSB7XG4gICAgICAgIGlmIChpc0lPUykge1xuICAgICAgICAgIFVJQXBwbGljYXRpb24uc2hhcmVkQXBwbGljYXRpb24ua2V5V2luZG93LmVuZEVkaXRpbmcodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQW5kcm9pZCkge1xuICAgICAgICAgIHV0aWxzLmFkLmRpc21pc3NTb2Z0SW5wdXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgXG5cblxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==