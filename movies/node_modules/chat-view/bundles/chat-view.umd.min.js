!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/animations"),require("@angular/common"),require("@angular/forms"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("chat-view",["exports","@angular/core","@angular/animations","@angular/common","@angular/forms","@angular/platform-browser"],t):t((e=e||self)["chat-view"]={},e.ng.core,e.ng.animations,e.ng.common,e.ng.forms,e.ng.platformBrowser)}(this,(function(e,t,n,o,i,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function p(e,t,n,o){var i,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,n,r):i(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,s=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return r}var d=function(){function e(){}return e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=p([t.Injectable({providedIn:"root"}),c("design:paramtypes",[])],e)}(),g=n.animation([n.style({opacity:"{{ opacity }}",transform:"translateY({{translateY}}%)"}),n.animate("{{ time }}")]),u=function(){function e(){this.messages=[],this.options={sentMessage:{textColor:"white",backgroundColor:"#c7ac7b"},receivedMessage:{textColor:"black",backgroundColor:"white"},header:{textColor:"white",backgroundColor:"#71a7de"},inputBox:{borderColor:"gray",textColor:"black",maxLength:50,sendIconColor:"#5e8dbd",backgroundColor:"#e1faf8"},quickReplies:{textColor:"white",backgroundColor:"#c7ac7b",borderColor:"#c7ac7b"},chatlistBackgroundColor:"#e1faf8"},this.onOptionClicked=new t.EventEmitter,this.onInput=new t.EventEmitter,this.oldMessages=[]}return e.prototype.sendMessage=function(e){this.onInput.emit(e)},e.prototype.optionClicked=function(e){this.onInput.emit(e)},e.prototype.scrollToBottom=function(){var e=this;setTimeout((function(){e.chatlist.nativeElement.scrollTop=e.chatlist.nativeElement.scrollHeight}),0)},e.prototype.ngDoCheck=function(){this.messages&&this.messages.length!=this.oldMessages.length&&this.scrollToBottom(),this.oldMessages=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}(this.messages)},p([t.ViewChild("chatlist",{static:!1}),c("design:type",t.ElementRef)],e.prototype,"chatlist",void 0),p([t.Input("messages"),c("design:type",Array)],e.prototype,"messages",void 0),p([t.Input("options"),c("design:type",Object)],e.prototype,"options",void 0),p([t.Output("onOptionClicked"),c("design:type",Object)],e.prototype,"onOptionClicked",void 0),p([t.Output("onInput"),c("design:type",Object)],e.prototype,"onInput",void 0),e=p([t.Component({selector:"chat-view",template:'<div class="chat-container">\n    <chat-header title="My Chat View" [headerOptions]="options.header"></chat-header>\n    <div #chatlist class="chat-list-wrapper"\n      [@messageAddedAnimation]="messages.length"\n      [style.backgroundColor]="options.chatlistBackgroundColor"\n      >\n        <div  class="chat-list-item" *ngFor="let message of messages;let i=index">\n\n            \x3c!--received Message--\x3e\n            <div *ngIf="message.getCategory()==\'received\'">\n                <received-message [message]="message"\n                (onOptionClicked)="optionClicked($event)" \n                [receivedMessageOptions]="options.receivedMessage"\n                [quickRepliesOptions]="options.quickReplies"\n                ></received-message>\n            </div>\n\n            \x3c!--Sent Message--\x3e\n            <div *ngIf="message.getCategory()==\'sent\'">\n                <sent-message [message]="message"\n                [sentMessageOptions]="options.sentMessage"\n                ></sent-message>\n            </div>\n        </div>\n    </div>\n    <user-input (onInput)="sendMessage($event)"\n    [options]="options.inputBox"></user-input>\n</div>',animations:[n.trigger("messageAddedAnimation",[n.transition(":enter, * => 0, * => -1",[]),n.transition(":increment",[n.query(":enter",[n.style({opacity:0}),n.stagger(100,[n.useAnimation(g,{params:{opacity:1,translateY:10,time:"0.2s"}})])],{optional:!0})])])],styles:["div{color:red}.chat-container{width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:end;justify-content:flex-end}.chat-list-wrapper{-webkit-box-flex:1;flex:1 1 auto;overflow-y:scroll}.chat-list-wrapper .chat-list-item:first-child{margin-top:5px}.chat-list-wrapper .chat-list-item,.chat-list-wrapper received-message sent-message{margin-bottom:5px}chat-header{box-shadow:0 5px 11px #dbd9d9be;z-index:1}user-input{-webkit-box-flex:0;flex:0 0 auto;background:0 0;z-index:1}received-message,sent-message{display:block;width:100%}"]}),c("design:paramtypes",[])],e)}(),m={SENT:"sent",RECEIVED:"received"},y=function(){function e(e){this.category=e}return e.prototype.setText=function(e){return this.text=e,this},e.prototype.getText=function(){return this.text},e.prototype.setImageUrl=function(e){return this.imageUrl=e,this},e.prototype.getImageUrl=function(){return this.imageUrl},e.prototype.getCategory=function(){return this.category},e}(),f=function(e){function t(){return e.call(this,m.RECEIVED)||this}return a(t,e),t.prototype.setQuickReplies=function(e){return this.quickReplies=e,this},t.prototype.getQuickReplies=function(){return this.quickReplies},t}(y),h=function(e){function t(){return e.call(this,m.SENT)||this}return a(t,e),t}(y),v=function(){function e(){this.onOptionClicked=new t.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.optionClicked=function(e){this.onOptionClicked.emit(e)},p([t.Input("message"),c("design:type",f)],e.prototype,"message",void 0),p([t.Input("receivedMessageOptions"),c("design:type",Object)],e.prototype,"receivedMessageOptions",void 0),p([t.Input("quickRepliesOptions"),c("design:type",Object)],e.prototype,"quickRepliesOptions",void 0),p([t.Output("onOptionClicked"),c("design:type",Object)],e.prototype,"onOptionClicked",void 0),e=p([t.Component({selector:"received-message",template:'<div class="recv-msg" >\n    <div *ngIf="message" class="recv-wrapper" >\n        <message [data]="message" (onOptionClicked)="optionClicked($event)" \n        [style.backgroundColor]="receivedMessageOptions?.backgroundColor" \n        [receivedMessageOptions]="receivedMessageOptions"\n        [quickRepliesOptions]="quickRepliesOptions"\n        ></message>\n    </div>\n</div>',styles:["div{color:#fff!important;text-align:left}.recv-msg{display:block;width:100%}.recv-msg .recv-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:start;justify-content:flex-start;margin-right:20%}.recv-msg message{background-color:#00bcd4;padding:5px;border-radius:10px;margin-left:10px;max-width:90%}"]}),c("design:paramtypes",[])],e)}(),b=function(){function e(){}return e.prototype.ngOnInit=function(){},p([t.Input("message"),c("design:type",h)],e.prototype,"message",void 0),p([t.Input("sentMessageOptions"),c("design:type",Object)],e.prototype,"sentMessageOptions",void 0),e=p([t.Component({selector:"sent-message",template:'<div class="sent-msg">\n    <div *ngIf="message" class="sent-wrapper">\n        <message [data]="message" [style.backgroundColor]="sentMessageOptions?.backgroundColor" [sentMessageOptions]="sentMessageOptions"></message>\n    </div>\n</div>',styles:["div{color:#0c0c0c;text-align:left}.sent-msg{display:block;width:100%}.sent-msg .sent-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;margin-left:20%}.sent-msg message{background-color:#bbdefb;padding:5px;border-radius:10px;margin-right:10px;max-width:90%}"]}),c("design:paramtypes",[])],e)}(),x=function(){function e(e){this.sanitizer=e,this.onOptionClicked=new t.EventEmitter,this.isRecivedMessage=!1,this.quickReplies=[]}return e.prototype.ngOnInit=function(){if(!this.message)throw new Error("Data Required");this.message.getCategory()==m.RECEIVED&&(this.isRecivedMessage=!0),this.text=this.message.getText(),this.image=this.message.getImageUrl(),this.message instanceof f&&(this.quickReplies=this.message.getQuickReplies())},e.prototype.optionClicked=function(e){this.onOptionClicked.emit(e)},e.prototype.onMouseOver=function(){this.isRecivedMessage?this.boxShadow=this.sanitizer.bypassSecurityTrustStyle("1px 2px 8px rgba(33,33,33,.4)"):this.boxShadow=this.sanitizer.bypassSecurityTrustStyle("-2px 2px 8px rgba(33,33,33,.4)")},e.prototype.onMouseLeave=function(){this.boxShadow="none"},e.ctorParameters=function(){return[{type:s.DomSanitizer}]},p([t.Input("data"),c("design:type",y)],e.prototype,"message",void 0),p([t.Input("receivedMessageOptions"),c("design:type",Object)],e.prototype,"receivedMessageOptions",void 0),p([t.Input("sentMessageOptions"),c("design:type",Object)],e.prototype,"sentMessageOptions",void 0),p([t.Input("quickRepliesOptions"),c("design:type",Object)],e.prototype,"quickRepliesOptions",void 0),p([t.Output("onOptionClicked"),c("design:type",Object)],e.prototype,"onOptionClicked",void 0),p([t.HostBinding("style.boxShadow"),c("design:type",Object)],e.prototype,"boxShadow",void 0),p([t.HostListener("mouseover"),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],e.prototype,"onMouseOver",null),p([t.HostListener("mouseleave"),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],e.prototype,"onMouseLeave",null),e=p([t.Component({selector:"message",template:'<div *ngIf="message">\n    \x3c!--RECEIVED ITEM--\x3e\n    <div class="message-wrapper" *ngIf="isRecivedMessage">\n\n        <div class="recv-text" *ngIf="text" [style.color]="receivedMessageOptions?.textColor">{{text}}</div>\n\n        <div *ngIf="image">\n            <img [src]="image" alt="">\n        </div>\n        <div class="quickreply-wrapper" *ngIf="quickReplies && quickReplies.length>0">\n            <div class="recv-quickreply" *ngFor="let reply of quickReplies"\n                [style.backgroundColor]="quickRepliesOptions?.backgroundColor"\n                [style.borderColor]="quickRepliesOptions?.borderColor">\n                <div (click)="optionClicked(reply)" \n                [style.color]="quickRepliesOptions?.textColor">{{reply}}</div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!--SENT ITEM--\x3e\n    <div class="message-wrapper" *ngIf="!isRecivedMessage">\n        <div class="sent-text" *ngIf="text" [style.color]="sentMessageOptions?.textColor">{{text}}</div>\n\n        <div *ngIf="image">\n            <img [src]="image" alt="">\n        </div>\n    </div>\n</div>',styles:["img{width:100%;display:block;margin:auto;max-width:95%;padding:5px;border-radius:10px}div{font-size:.9rem}.recv-text,.sent-text{word-wrap:break-word;padding:3px}.recv-quickreply{display:inline-block;border:1px solid rgba(255,255,255,.521);border-radius:10px;padding:3px 5px;margin-left:3px;cursor:pointer}.recv-quickreply:hover{box-shadow:0 0 11px rgba(33,33,33,.2);border:1px solid #fff}.quickreply-wrapper{margin-top:5px}"]}),c("design:paramtypes",[s.DomSanitizer])],e)}(),k=function(){function e(){this.onInput=new t.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.send=function(){this.inputText&&(this.onInput.emit(this.inputText),this.inputText="")},p([t.Output("onInput"),c("design:type",Object)],e.prototype,"onInput",void 0),p([t.Input("options"),c("design:type",Object)],e.prototype,"options",void 0),e=p([t.Component({selector:"user-input",template:'<div class="input-wrapper" [style.backgroundColor]="options?.backgroundColor">\n    <input type="text" [(ngModel)]="inputText" placeholder="Say Something..." \n    [attr.maxlength]="options?.maxLength"\n    [style.borderColor]="options?.borderColor"\n    [style.color]="options?.textColor" (keyup.enter)="send()"/>\n    <button class="btn-input-send"  (click)="send()">\n        <send-svg  [color]="options?.sendIconColor"></send-svg>\n    </button>\n</div>',styles:[".input-wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;padding-left:5px;height:35px;background-color:transparent}input{box-sizing:border-box;-webkit-box-flex:1;flex:1;border:1px solid #2196f3;background:0 0;color:#000;padding-left:5px;padding-right:5px;margin:2px;border-radius:15px}.btn-input-send{-webkit-box-flex:0;flex:0}button{background:0 0;border:none}::-webkit-input-placeholder{color:gray}:-ms-input-placeholder{color:gray}::-moz-placeholder{color:gray;opacity:.5}::-ms-input-placeholder{color:gray;opacity:.5}::placeholder{color:gray;opacity:.5}button:focus,input:focus,select:focus,textarea:focus{outline:0}send-svg{display:block;height:20px;width:20px;padding:5px 0;-webkit-transition:ease-in;transition:ease-in}send-svg:hover{height:18px;width:18px}"]}),c("design:paramtypes",[])],e)}(),w=function(){function e(){this.title="Chat View"}return e.prototype.ngOnInit=function(){},p([t.Input("title"),c("design:type",Object)],e.prototype,"title",void 0),p([t.Input("headerOptions"),c("design:type",Object)],e.prototype,"headerOptions",void 0),e=p([t.Component({selector:"chat-header",template:'<div class="chat-header-wrapper" [style.backgroundColor]="headerOptions?.backgroundColor">\n    <div class="chat-header-title" [style.color]="headerOptions?.textColor">\n        {{title}}\n    </div>\n</div>',styles:[".chat-header-wrapper{background-color:#2196f3;height:40px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;justify-content:space-around}.chat-header-title{text-align:center;vertical-align:middle;color:#fff}"]}),c("design:paramtypes",[])],e)}(),O=function(){function e(){this.color=""}return e.prototype.ngOnInit=function(){},p([t.Input("color"),c("design:type",Object)],e.prototype,"color",void 0),e=p([t.Component({selector:"send-svg",template:'<svg enable-background="new 0 0 24 24" height="100%" viewBox="0 0 24 24" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="m8.75 17.612v4.638c0 .324.208.611.516.713.077.025.156.037.234.037.234 0 .46-.11.604-.306l2.713-3.692z" [attr.fill]="color"/><path d="m23.685.139c-.23-.163-.532-.185-.782-.054l-22.5 11.75c-.266.139-.423.423-.401.722.023.3.222.556.505.653l6.255 2.138 13.321-11.39-10.308 12.419 10.483 3.583c.078.026.16.04.242.04.136 0 .271-.037.39-.109.19-.116.319-.311.352-.53l2.75-18.5c.041-.28-.077-.558-.307-.722z" [attr.fill]="color"/></svg>',styles:[""]}),c("design:paramtypes",[])],e)}(),C=function(){function e(){}return e=p([t.NgModule({imports:[o.CommonModule,i.FormsModule],declarations:[u,v,b,x,k,w,O],exports:[u]})],e)}();e.ChatViewComponent=u,e.ChatViewModule=C,e.ChatViewService=d,e.MESSAGE_CATEGORY=m,e.MESSAGE_TYPES={TEXT:"text",IMAGE:"image"},e.Message=y,e.ReceivedMessage=f,e.SentMessage=h,e.ɵa=g,e.ɵb=v,e.ɵc=b,e.ɵd=x,e.ɵe=k,e.ɵf=w,e.ɵg=O,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=chat-view.umd.min.js.map