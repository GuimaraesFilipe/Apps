import * as tslib_1 from "tslib";
import { Component, EventEmitter, HostBinding, HostListener, Input, Output } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import { Message, MESSAGE_CATEGORY, ReceivedMessage } from '../message-data/message-data';
var MessageComponent = /** @class */ (function () {
    /**
     *Creates an instance of MessageComponent.
     * @param {DomSanitizer} sanitizer
     * @memberof MessageComponent
     */
    function MessageComponent(sanitizer) {
        this.sanitizer = sanitizer;
        /**
         * Output property which will emit an event on quick reply option is clicked.
         * @memberof MessageComponent
         */
        this.onOptionClicked = new EventEmitter();
        this.isRecivedMessage = false;
        this.quickReplies = [];
    }
    /**
     * Set 'isRecivedMessage' flag based on message category.
     * Assign values to text, image and quick replies variables.
     * Currently image and quick replies are only used for received message.
     * @memberof MessageComponent
     */
    MessageComponent.prototype.ngOnInit = function () {
        if (!this.message) {
            throw new Error('Data Required');
        }
        if (this.message.getCategory() == MESSAGE_CATEGORY.RECEIVED) {
            this.isRecivedMessage = true;
        }
        this.text = this.message.getText();
        this.image = this.message.getImageUrl();
        if (this.message instanceof ReceivedMessage) {
            this.quickReplies = this.message.getQuickReplies();
        }
    };
    /**
     * Emit 'onOptionClicked' event with 'option text' payload
     * @param {string} option
     * @memberof MessageComponent
     */
    MessageComponent.prototype.optionClicked = function (option) {
        this.onOptionClicked.emit(option);
    };
    /**
     * Set mouseover HostBinding for message component
     * This sets BoxShadow of component on 'hover'
     * @memberof MessageComponent
     */
    MessageComponent.prototype.onMouseOver = function () {
        if (this.isRecivedMessage) {
            this.boxShadow = this.sanitizer.bypassSecurityTrustStyle('1px 2px 8px rgba(33,33,33,.4)');
        }
        else {
            this.boxShadow = this.sanitizer.bypassSecurityTrustStyle('-2px 2px 8px rgba(33,33,33,.4)');
        }
    };
    /**
    * Set mouseleave HostBinding for message component
    * This removes BoxShadow of component.
    * @memberof MessageComponent
    */
    MessageComponent.prototype.onMouseLeave = function () {
        this.boxShadow = 'none';
    };
    MessageComponent.ctorParameters = function () { return [
        { type: DomSanitizer }
    ]; };
    tslib_1.__decorate([
        Input('data'),
        tslib_1.__metadata("design:type", Message)
    ], MessageComponent.prototype, "message", void 0);
    tslib_1.__decorate([
        Input('receivedMessageOptions'),
        tslib_1.__metadata("design:type", Object)
    ], MessageComponent.prototype, "receivedMessageOptions", void 0);
    tslib_1.__decorate([
        Input('sentMessageOptions'),
        tslib_1.__metadata("design:type", Object)
    ], MessageComponent.prototype, "sentMessageOptions", void 0);
    tslib_1.__decorate([
        Input('quickRepliesOptions'),
        tslib_1.__metadata("design:type", Object)
    ], MessageComponent.prototype, "quickRepliesOptions", void 0);
    tslib_1.__decorate([
        Output('onOptionClicked'),
        tslib_1.__metadata("design:type", Object)
    ], MessageComponent.prototype, "onOptionClicked", void 0);
    tslib_1.__decorate([
        HostBinding('style.boxShadow'),
        tslib_1.__metadata("design:type", Object)
    ], MessageComponent.prototype, "boxShadow", void 0);
    tslib_1.__decorate([
        HostListener('mouseover'),
        tslib_1.__metadata("design:type", Function),
        tslib_1.__metadata("design:paramtypes", []),
        tslib_1.__metadata("design:returntype", void 0)
    ], MessageComponent.prototype, "onMouseOver", null);
    tslib_1.__decorate([
        HostListener('mouseleave'),
        tslib_1.__metadata("design:type", Function),
        tslib_1.__metadata("design:paramtypes", []),
        tslib_1.__metadata("design:returntype", void 0)
    ], MessageComponent.prototype, "onMouseLeave", null);
    MessageComponent = tslib_1.__decorate([
        Component({
            selector: 'message',
            template: "<div *ngIf=\"message\">\n    <!--RECEIVED ITEM-->\n    <div class=\"message-wrapper\" *ngIf=\"isRecivedMessage\">\n\n        <div class=\"recv-text\" *ngIf=\"text\" [style.color]=\"receivedMessageOptions?.textColor\">{{text}}</div>\n\n        <div *ngIf=\"image\">\n            <img [src]=\"image\" alt=\"\">\n        </div>\n        <div class=\"quickreply-wrapper\" *ngIf=\"quickReplies && quickReplies.length>0\">\n            <div class=\"recv-quickreply\" *ngFor=\"let reply of quickReplies\"\n                [style.backgroundColor]=\"quickRepliesOptions?.backgroundColor\"\n                [style.borderColor]=\"quickRepliesOptions?.borderColor\">\n                <div (click)=\"optionClicked(reply)\" \n                [style.color]=\"quickRepliesOptions?.textColor\">{{reply}}</div>\n            </div>\n        </div>\n    </div>\n\n    <!--SENT ITEM-->\n    <div class=\"message-wrapper\" *ngIf=\"!isRecivedMessage\">\n        <div class=\"sent-text\" *ngIf=\"text\" [style.color]=\"sentMessageOptions?.textColor\">{{text}}</div>\n\n        <div *ngIf=\"image\">\n            <img [src]=\"image\" alt=\"\">\n        </div>\n    </div>\n</div>",
            styles: ["img{width:100%;display:block;margin:auto;max-width:95%;padding:5px;border-radius:10px}div{font-size:.9rem}.recv-text,.sent-text{word-wrap:break-word;padding:3px}.recv-quickreply{display:inline-block;border:1px solid rgba(255,255,255,.521);border-radius:10px;padding:3px 5px;margin-left:3px;cursor:pointer}.recv-quickreply:hover{box-shadow:0 0 11px rgba(33,33,33,.2);border:1px solid #fff}.quickreply-wrapper{margin-top:5px}"]
        }),
        tslib_1.__metadata("design:paramtypes", [DomSanitizer])
    ], MessageComponent);
    return MessageComponent;
}());
export { MessageComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9jaGF0LXZpZXcvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUcsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRXpELE9BQU8sRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFPMUY7SUFtREk7Ozs7T0FJRztJQUNILDBCQUFvQixTQUFzQjtRQUF0QixjQUFTLEdBQVQsU0FBUyxDQUFhO1FBdkIxQzs7O1dBR0c7UUFDd0Isb0JBQWUsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFBO1FBUy9ELHFCQUFnQixHQUFHLEtBQUssQ0FBQztRQUd6QixpQkFBWSxHQUFHLEVBQUUsQ0FBQTtJQVNqQixDQUFDO0lBR0Q7Ozs7O09BS0c7SUFDSCxtQ0FBUSxHQUFSO1FBQ0ksSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDZixNQUFNLElBQUksS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFBO1NBQ25DO1FBQ0QsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxJQUFJLGdCQUFnQixDQUFDLFFBQVEsRUFBRTtZQUN6RCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFBO1NBQy9CO1FBQ0QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQTtRQUV2QyxJQUFJLElBQUksQ0FBQyxPQUFPLFlBQVksZUFBZSxFQUFFO1lBQ3pDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsQ0FBQTtTQUNyRDtJQUNMLENBQUM7SUFHRDs7OztPQUlHO0lBQ0gsd0NBQWEsR0FBYixVQUFjLE1BQU07UUFDaEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDckMsQ0FBQztJQUdEOzs7O09BSUc7SUFDd0Isc0NBQVcsR0FBWDtRQUN2QixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUN2QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsd0JBQXdCLENBQUMsK0JBQStCLENBQUMsQ0FBQTtTQUM1RjthQUFNO1lBQ0gsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLHdCQUF3QixDQUFDLGdDQUFnQyxDQUFDLENBQUE7U0FDN0Y7SUFDTCxDQUFDO0lBRUE7Ozs7TUFJRTtJQUN5Qix1Q0FBWSxHQUFaO1FBQ3hCLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFBO0lBQzNCLENBQUM7O2dCQXpENkIsWUFBWTs7SUFqRDNCO1FBQWQsS0FBSyxDQUFDLE1BQU0sQ0FBQzswQ0FBVSxPQUFPO3FEQUFDO0lBUUM7UUFBaEMsS0FBSyxDQUFDLHdCQUF3QixDQUFDOztvRUFBMEM7SUFRN0M7UUFBNUIsS0FBSyxDQUFDLG9CQUFvQixDQUFDOztnRUFBc0M7SUFPcEM7UUFBN0IsS0FBSyxDQUFDLHFCQUFxQixDQUFDOztpRUFBb0I7SUFPdEI7UUFBMUIsTUFBTSxDQUFDLGlCQUFpQixDQUFDOzs2REFBcUM7SUFPL0I7UUFBL0IsV0FBVyxDQUFDLGlCQUFpQixDQUFDOzt1REFBVztJQXNEZjtRQUExQixZQUFZLENBQUMsV0FBVyxDQUFDOzs7O3VEQU16QjtJQU8yQjtRQUEzQixZQUFZLENBQUMsWUFBWSxDQUFDOzs7O3dEQUUxQjtJQWpIUSxnQkFBZ0I7UUFONUIsU0FBUyxDQUFDO1lBQ1AsUUFBUSxFQUFFLFNBQVM7WUFDbkIsOG9DQUFxQzs7U0FFeEMsQ0FBQztpREEwRGdDLFlBQVk7T0F4RGpDLGdCQUFnQixDQWtINUI7SUFBRCx1QkFBQztDQUFBLEFBbEhELElBa0hDO1NBbEhZLGdCQUFnQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBIb3N0QmluZGluZywgSG9zdExpc3RlbmVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERvbVNhbml0aXplciB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xuaW1wb3J0IHsgSUNoYXRNZXNzYWdlT3B0aW9uIH0gZnJvbSAnLi4vLi4vY2hhdC12aWV3LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBNZXNzYWdlLCBNRVNTQUdFX0NBVEVHT1JZLCBSZWNlaXZlZE1lc3NhZ2UgfSBmcm9tICcuLi9tZXNzYWdlLWRhdGEvbWVzc2FnZS1kYXRhJztcbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnbWVzc2FnZScsXG4gICAgdGVtcGxhdGVVcmw6ICdtZXNzYWdlLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9tZXNzYWdlLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIC8qKlxuICAgICAqIElucHV0IHByb3BlcnR5IHRvIHNldCBjaGF0IG1lc3NhZ2UgZGV0YWlscy4gXG4gICAgICogQHR5cGUge01lc3NhZ2V9XG4gICAgICogQG1lbWJlcm9mIE1lc3NhZ2VDb21wb25lbnRcbiAgICAgKi9cbiAgICBASW5wdXQoJ2RhdGEnKSBtZXNzYWdlOiBNZXNzYWdlO1xuICAgIFxuXG4gICAgLyoqXG4gICAgICogSW5wdXQgcHJvcGVydHkgdG8gc2V0IGNzcyBzdHlsaW5nIHByb3BlcnRpZXMgcmVjZWl2ZWQgbWVzc2FnZS4gXG4gICAgICogQHR5cGUge0lDaGF0TWVzc2FnZU9wdGlvbn1cbiAgICAgKiBAbWVtYmVyb2YgTWVzc2FnZUNvbXBvbmVudFxuICAgICAqL1xuICAgIEBJbnB1dCgncmVjZWl2ZWRNZXNzYWdlT3B0aW9ucycpIHJlY2VpdmVkTWVzc2FnZU9wdGlvbnM6SUNoYXRNZXNzYWdlT3B0aW9uXG5cblxuICAgIC8qKlxuICAgICAqIElucHV0IHByb3BlcnR5IHRvIHNldCBjc3Mgc3R5bGluZyBwcm9wZXJ0aWVzIHNlbnQgbWVzc2FnZS4gXG4gICAgICogQHR5cGUge0lDaGF0TWVzc2FnZU9wdGlvbn1cbiAgICAgKiBAbWVtYmVyb2YgTWVzc2FnZUNvbXBvbmVudFxuICAgICAqL1xuICAgIEBJbnB1dCgnc2VudE1lc3NhZ2VPcHRpb25zJykgc2VudE1lc3NhZ2VPcHRpb25zOklDaGF0TWVzc2FnZU9wdGlvblxuXG5cbiAgICAvKipcbiAgICAgKiBJbnB1dCBwcm9wZXJ0eSB0byBzZXQgY3NzIHN0eWxpbmcgcHJvcGVydGllcyBxdWljayByZXBsaWVzLiBcbiAgICAgKiBAbWVtYmVyb2YgTWVzc2FnZUNvbXBvbmVudFxuICAgICAqL1xuICAgIEBJbnB1dCgncXVpY2tSZXBsaWVzT3B0aW9ucycpIHF1aWNrUmVwbGllc09wdGlvbnNcbiAgICBcblxuICAgIC8qKlxuICAgICAqIE91dHB1dCBwcm9wZXJ0eSB3aGljaCB3aWxsIGVtaXQgYW4gZXZlbnQgb24gcXVpY2sgcmVwbHkgb3B0aW9uIGlzIGNsaWNrZWQuXG4gICAgICogQG1lbWJlcm9mIE1lc3NhZ2VDb21wb25lbnRcbiAgICAgKi9cbiAgICBAT3V0cHV0KCdvbk9wdGlvbkNsaWNrZWQnKSBvbk9wdGlvbkNsaWNrZWQgPSBuZXcgRXZlbnRFbWl0dGVyKClcblxuXG4gICAgLyoqXG4gICAgICogSG9zdEJpbmRpbmcgdG8gc2hvdyBzaGFkb3cgYmVoaW5kIGNoYXQgbWVzc2FnZSBvbiBob3Zlci5cbiAgICAgKiBAbWVtYmVyb2YgTWVzc2FnZUNvbXBvbmVudFxuICAgICAqL1xuICAgIEBIb3N0QmluZGluZygnc3R5bGUuYm94U2hhZG93JykgYm94U2hhZG93O1xuXG4gICAgaXNSZWNpdmVkTWVzc2FnZSA9IGZhbHNlO1xuICAgIHRleHQ7XG4gICAgaW1hZ2U7XG4gICAgcXVpY2tSZXBsaWVzID0gW11cbiAgICBcbiAgICAvKipcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgTWVzc2FnZUNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0ge0RvbVNhbml0aXplcn0gc2FuaXRpemVyXG4gICAgICogQG1lbWJlcm9mIE1lc3NhZ2VDb21wb25lbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNhbml0aXplcjpEb21TYW5pdGl6ZXIpIHtcblxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogU2V0ICdpc1JlY2l2ZWRNZXNzYWdlJyBmbGFnIGJhc2VkIG9uIG1lc3NhZ2UgY2F0ZWdvcnkuXG4gICAgICogQXNzaWduIHZhbHVlcyB0byB0ZXh0LCBpbWFnZSBhbmQgcXVpY2sgcmVwbGllcyB2YXJpYWJsZXMuIFxuICAgICAqIEN1cnJlbnRseSBpbWFnZSBhbmQgcXVpY2sgcmVwbGllcyBhcmUgb25seSB1c2VkIGZvciByZWNlaXZlZCBtZXNzYWdlLlxuICAgICAqIEBtZW1iZXJvZiBNZXNzYWdlQ29tcG9uZW50XG4gICAgICovXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5tZXNzYWdlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgUmVxdWlyZWQnKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2UuZ2V0Q2F0ZWdvcnkoKSA9PSBNRVNTQUdFX0NBVEVHT1JZLlJFQ0VJVkVEKSB7XG4gICAgICAgICAgICB0aGlzLmlzUmVjaXZlZE1lc3NhZ2UgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy5tZXNzYWdlLmdldFRleHQoKVxuICAgICAgICB0aGlzLmltYWdlID0gdGhpcy5tZXNzYWdlLmdldEltYWdlVXJsKClcblxuICAgICAgICBpZiAodGhpcy5tZXNzYWdlIGluc3RhbmNlb2YgUmVjZWl2ZWRNZXNzYWdlKSB7ICBcbiAgICAgICAgICAgIHRoaXMucXVpY2tSZXBsaWVzID0gdGhpcy5tZXNzYWdlLmdldFF1aWNrUmVwbGllcygpXG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEVtaXQgJ29uT3B0aW9uQ2xpY2tlZCcgZXZlbnQgd2l0aCAnb3B0aW9uIHRleHQnIHBheWxvYWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9uXG4gICAgICogQG1lbWJlcm9mIE1lc3NhZ2VDb21wb25lbnRcbiAgICAgKi9cbiAgICBvcHRpb25DbGlja2VkKG9wdGlvbikge1xuICAgICAgICB0aGlzLm9uT3B0aW9uQ2xpY2tlZC5lbWl0KG9wdGlvbilcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFNldCBtb3VzZW92ZXIgSG9zdEJpbmRpbmcgZm9yIG1lc3NhZ2UgY29tcG9uZW50XG4gICAgICogVGhpcyBzZXRzIEJveFNoYWRvdyBvZiBjb21wb25lbnQgb24gJ2hvdmVyJ1xuICAgICAqIEBtZW1iZXJvZiBNZXNzYWdlQ29tcG9uZW50XG4gICAgICovXG4gICAgQEhvc3RMaXN0ZW5lcignbW91c2VvdmVyJykgb25Nb3VzZU92ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVjaXZlZE1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMuYm94U2hhZG93ID0gdGhpcy5zYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKCcxcHggMnB4IDhweCByZ2JhKDMzLDMzLDMzLC40KScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJveFNoYWRvdyA9IHRoaXMuc2FuaXRpemVyLmJ5cGFzc1NlY3VyaXR5VHJ1c3RTdHlsZSgnLTJweCAycHggOHB4IHJnYmEoMzMsMzMsMzMsLjQpJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgICAvKipcbiAgICAgKiBTZXQgbW91c2VsZWF2ZSBIb3N0QmluZGluZyBmb3IgbWVzc2FnZSBjb21wb25lbnRcbiAgICAgKiBUaGlzIHJlbW92ZXMgQm94U2hhZG93IG9mIGNvbXBvbmVudC5cbiAgICAgKiBAbWVtYmVyb2YgTWVzc2FnZUNvbXBvbmVudFxuICAgICAqL1xuICAgIEBIb3N0TGlzdGVuZXIoJ21vdXNlbGVhdmUnKSBvbk1vdXNlTGVhdmUoKSB7XG4gICAgICAgIHRoaXMuYm94U2hhZG93ID0gJ25vbmUnXG4gICAgfVxufSJdfQ==