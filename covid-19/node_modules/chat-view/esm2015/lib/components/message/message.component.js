import * as tslib_1 from "tslib";
import { Component, EventEmitter, HostBinding, HostListener, Input, Output } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import { Message, MESSAGE_CATEGORY, ReceivedMessage } from '../message-data/message-data';
let MessageComponent = class MessageComponent {
    /**
     *Creates an instance of MessageComponent.
     * @param {DomSanitizer} sanitizer
     * @memberof MessageComponent
     */
    constructor(sanitizer) {
        this.sanitizer = sanitizer;
        /**
         * Output property which will emit an event on quick reply option is clicked.
         * @memberof MessageComponent
         */
        this.onOptionClicked = new EventEmitter();
        this.isRecivedMessage = false;
        this.quickReplies = [];
    }
    /**
     * Set 'isRecivedMessage' flag based on message category.
     * Assign values to text, image and quick replies variables.
     * Currently image and quick replies are only used for received message.
     * @memberof MessageComponent
     */
    ngOnInit() {
        if (!this.message) {
            throw new Error('Data Required');
        }
        if (this.message.getCategory() == MESSAGE_CATEGORY.RECEIVED) {
            this.isRecivedMessage = true;
        }
        this.text = this.message.getText();
        this.image = this.message.getImageUrl();
        if (this.message instanceof ReceivedMessage) {
            this.quickReplies = this.message.getQuickReplies();
        }
    }
    /**
     * Emit 'onOptionClicked' event with 'option text' payload
     * @param {string} option
     * @memberof MessageComponent
     */
    optionClicked(option) {
        this.onOptionClicked.emit(option);
    }
    /**
     * Set mouseover HostBinding for message component
     * This sets BoxShadow of component on 'hover'
     * @memberof MessageComponent
     */
    onMouseOver() {
        if (this.isRecivedMessage) {
            this.boxShadow = this.sanitizer.bypassSecurityTrustStyle('1px 2px 8px rgba(33,33,33,.4)');
        }
        else {
            this.boxShadow = this.sanitizer.bypassSecurityTrustStyle('-2px 2px 8px rgba(33,33,33,.4)');
        }
    }
    /**
    * Set mouseleave HostBinding for message component
    * This removes BoxShadow of component.
    * @memberof MessageComponent
    */
    onMouseLeave() {
        this.boxShadow = 'none';
    }
};
MessageComponent.ctorParameters = () => [
    { type: DomSanitizer }
];
tslib_1.__decorate([
    Input('data'),
    tslib_1.__metadata("design:type", Message)
], MessageComponent.prototype, "message", void 0);
tslib_1.__decorate([
    Input('receivedMessageOptions'),
    tslib_1.__metadata("design:type", Object)
], MessageComponent.prototype, "receivedMessageOptions", void 0);
tslib_1.__decorate([
    Input('sentMessageOptions'),
    tslib_1.__metadata("design:type", Object)
], MessageComponent.prototype, "sentMessageOptions", void 0);
tslib_1.__decorate([
    Input('quickRepliesOptions'),
    tslib_1.__metadata("design:type", Object)
], MessageComponent.prototype, "quickRepliesOptions", void 0);
tslib_1.__decorate([
    Output('onOptionClicked'),
    tslib_1.__metadata("design:type", Object)
], MessageComponent.prototype, "onOptionClicked", void 0);
tslib_1.__decorate([
    HostBinding('style.boxShadow'),
    tslib_1.__metadata("design:type", Object)
], MessageComponent.prototype, "boxShadow", void 0);
tslib_1.__decorate([
    HostListener('mouseover'),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", []),
    tslib_1.__metadata("design:returntype", void 0)
], MessageComponent.prototype, "onMouseOver", null);
tslib_1.__decorate([
    HostListener('mouseleave'),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", []),
    tslib_1.__metadata("design:returntype", void 0)
], MessageComponent.prototype, "onMouseLeave", null);
MessageComponent = tslib_1.__decorate([
    Component({
        selector: 'message',
        template: "<div *ngIf=\"message\">\n    <!--RECEIVED ITEM-->\n    <div class=\"message-wrapper\" *ngIf=\"isRecivedMessage\">\n\n        <div class=\"recv-text\" *ngIf=\"text\" [style.color]=\"receivedMessageOptions?.textColor\">{{text}}</div>\n\n        <div *ngIf=\"image\">\n            <img [src]=\"image\" alt=\"\">\n        </div>\n        <div class=\"quickreply-wrapper\" *ngIf=\"quickReplies && quickReplies.length>0\">\n            <div class=\"recv-quickreply\" *ngFor=\"let reply of quickReplies\"\n                [style.backgroundColor]=\"quickRepliesOptions?.backgroundColor\"\n                [style.borderColor]=\"quickRepliesOptions?.borderColor\">\n                <div (click)=\"optionClicked(reply)\" \n                [style.color]=\"quickRepliesOptions?.textColor\">{{reply}}</div>\n            </div>\n        </div>\n    </div>\n\n    <!--SENT ITEM-->\n    <div class=\"message-wrapper\" *ngIf=\"!isRecivedMessage\">\n        <div class=\"sent-text\" *ngIf=\"text\" [style.color]=\"sentMessageOptions?.textColor\">{{text}}</div>\n\n        <div *ngIf=\"image\">\n            <img [src]=\"image\" alt=\"\">\n        </div>\n    </div>\n</div>",
        styles: ["img{width:100%;display:block;margin:auto;max-width:95%;padding:5px;border-radius:10px}div{font-size:.9rem}.recv-text,.sent-text{word-wrap:break-word;padding:3px}.recv-quickreply{display:inline-block;border:1px solid rgba(255,255,255,.521);border-radius:10px;padding:3px 5px;margin-left:3px;cursor:pointer}.recv-quickreply:hover{box-shadow:0 0 11px rgba(33,33,33,.2);border:1px solid #fff}.quickreply-wrapper{margin-top:5px}"]
    }),
    tslib_1.__metadata("design:paramtypes", [DomSanitizer])
], MessageComponent);
export { MessageComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9jaGF0LXZpZXcvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUcsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRXpELE9BQU8sRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFPMUYsSUFBYSxnQkFBZ0IsR0FBN0IsTUFBYSxnQkFBZ0I7SUFtRHpCOzs7O09BSUc7SUFDSCxZQUFvQixTQUFzQjtRQUF0QixjQUFTLEdBQVQsU0FBUyxDQUFhO1FBdkIxQzs7O1dBR0c7UUFDd0Isb0JBQWUsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFBO1FBUy9ELHFCQUFnQixHQUFHLEtBQUssQ0FBQztRQUd6QixpQkFBWSxHQUFHLEVBQUUsQ0FBQTtJQVNqQixDQUFDO0lBR0Q7Ozs7O09BS0c7SUFDSCxRQUFRO1FBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDZixNQUFNLElBQUksS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFBO1NBQ25DO1FBQ0QsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxJQUFJLGdCQUFnQixDQUFDLFFBQVEsRUFBRTtZQUN6RCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFBO1NBQy9CO1FBQ0QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQTtRQUV2QyxJQUFJLElBQUksQ0FBQyxPQUFPLFlBQVksZUFBZSxFQUFFO1lBQ3pDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsQ0FBQTtTQUNyRDtJQUNMLENBQUM7SUFHRDs7OztPQUlHO0lBQ0gsYUFBYSxDQUFDLE1BQU07UUFDaEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDckMsQ0FBQztJQUdEOzs7O09BSUc7SUFDd0IsV0FBVztRQUNsQyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUN2QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsd0JBQXdCLENBQUMsK0JBQStCLENBQUMsQ0FBQTtTQUM1RjthQUFNO1lBQ0gsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLHdCQUF3QixDQUFDLGdDQUFnQyxDQUFDLENBQUE7U0FDN0Y7SUFDTCxDQUFDO0lBRUE7Ozs7TUFJRTtJQUN5QixZQUFZO1FBQ3BDLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFBO0lBQzNCLENBQUM7Q0FDSixDQUFBOztZQTFEaUMsWUFBWTs7QUFqRDNCO0lBQWQsS0FBSyxDQUFDLE1BQU0sQ0FBQztzQ0FBVSxPQUFPO2lEQUFDO0FBUUM7SUFBaEMsS0FBSyxDQUFDLHdCQUF3QixDQUFDOztnRUFBMEM7QUFRN0M7SUFBNUIsS0FBSyxDQUFDLG9CQUFvQixDQUFDOzs0REFBc0M7QUFPcEM7SUFBN0IsS0FBSyxDQUFDLHFCQUFxQixDQUFDOzs2REFBb0I7QUFPdEI7SUFBMUIsTUFBTSxDQUFDLGlCQUFpQixDQUFDOzt5REFBcUM7QUFPL0I7SUFBL0IsV0FBVyxDQUFDLGlCQUFpQixDQUFDOzttREFBVztBQXNEZjtJQUExQixZQUFZLENBQUMsV0FBVyxDQUFDOzs7O21EQU16QjtBQU8yQjtJQUEzQixZQUFZLENBQUMsWUFBWSxDQUFDOzs7O29EQUUxQjtBQWpIUSxnQkFBZ0I7SUFONUIsU0FBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLFNBQVM7UUFDbkIsOG9DQUFxQzs7S0FFeEMsQ0FBQzs2Q0EwRGdDLFlBQVk7R0F4RGpDLGdCQUFnQixDQWtINUI7U0FsSFksZ0JBQWdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIEhvc3RCaW5kaW5nLCBIb3N0TGlzdGVuZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRG9tU2FuaXRpemVyIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG5pbXBvcnQgeyBJQ2hhdE1lc3NhZ2VPcHRpb24gfSBmcm9tICcuLi8uLi9jaGF0LXZpZXcuY29tcG9uZW50JztcbmltcG9ydCB7IE1lc3NhZ2UsIE1FU1NBR0VfQ0FURUdPUlksIFJlY2VpdmVkTWVzc2FnZSB9IGZyb20gJy4uL21lc3NhZ2UtZGF0YS9tZXNzYWdlLWRhdGEnO1xuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdtZXNzYWdlJyxcbiAgICB0ZW1wbGF0ZVVybDogJ21lc3NhZ2UuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL21lc3NhZ2UuY29tcG9uZW50LnNjc3MnXVxufSlcblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgLyoqXG4gICAgICogSW5wdXQgcHJvcGVydHkgdG8gc2V0IGNoYXQgbWVzc2FnZSBkZXRhaWxzLiBcbiAgICAgKiBAdHlwZSB7TWVzc2FnZX1cbiAgICAgKiBAbWVtYmVyb2YgTWVzc2FnZUNvbXBvbmVudFxuICAgICAqL1xuICAgIEBJbnB1dCgnZGF0YScpIG1lc3NhZ2U6IE1lc3NhZ2U7XG4gICAgXG5cbiAgICAvKipcbiAgICAgKiBJbnB1dCBwcm9wZXJ0eSB0byBzZXQgY3NzIHN0eWxpbmcgcHJvcGVydGllcyByZWNlaXZlZCBtZXNzYWdlLiBcbiAgICAgKiBAdHlwZSB7SUNoYXRNZXNzYWdlT3B0aW9ufVxuICAgICAqIEBtZW1iZXJvZiBNZXNzYWdlQ29tcG9uZW50XG4gICAgICovXG4gICAgQElucHV0KCdyZWNlaXZlZE1lc3NhZ2VPcHRpb25zJykgcmVjZWl2ZWRNZXNzYWdlT3B0aW9uczpJQ2hhdE1lc3NhZ2VPcHRpb25cblxuXG4gICAgLyoqXG4gICAgICogSW5wdXQgcHJvcGVydHkgdG8gc2V0IGNzcyBzdHlsaW5nIHByb3BlcnRpZXMgc2VudCBtZXNzYWdlLiBcbiAgICAgKiBAdHlwZSB7SUNoYXRNZXNzYWdlT3B0aW9ufVxuICAgICAqIEBtZW1iZXJvZiBNZXNzYWdlQ29tcG9uZW50XG4gICAgICovXG4gICAgQElucHV0KCdzZW50TWVzc2FnZU9wdGlvbnMnKSBzZW50TWVzc2FnZU9wdGlvbnM6SUNoYXRNZXNzYWdlT3B0aW9uXG5cblxuICAgIC8qKlxuICAgICAqIElucHV0IHByb3BlcnR5IHRvIHNldCBjc3Mgc3R5bGluZyBwcm9wZXJ0aWVzIHF1aWNrIHJlcGxpZXMuIFxuICAgICAqIEBtZW1iZXJvZiBNZXNzYWdlQ29tcG9uZW50XG4gICAgICovXG4gICAgQElucHV0KCdxdWlja1JlcGxpZXNPcHRpb25zJykgcXVpY2tSZXBsaWVzT3B0aW9uc1xuICAgIFxuXG4gICAgLyoqXG4gICAgICogT3V0cHV0IHByb3BlcnR5IHdoaWNoIHdpbGwgZW1pdCBhbiBldmVudCBvbiBxdWljayByZXBseSBvcHRpb24gaXMgY2xpY2tlZC5cbiAgICAgKiBAbWVtYmVyb2YgTWVzc2FnZUNvbXBvbmVudFxuICAgICAqL1xuICAgIEBPdXRwdXQoJ29uT3B0aW9uQ2xpY2tlZCcpIG9uT3B0aW9uQ2xpY2tlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKVxuXG5cbiAgICAvKipcbiAgICAgKiBIb3N0QmluZGluZyB0byBzaG93IHNoYWRvdyBiZWhpbmQgY2hhdCBtZXNzYWdlIG9uIGhvdmVyLlxuICAgICAqIEBtZW1iZXJvZiBNZXNzYWdlQ29tcG9uZW50XG4gICAgICovXG4gICAgQEhvc3RCaW5kaW5nKCdzdHlsZS5ib3hTaGFkb3cnKSBib3hTaGFkb3c7XG5cbiAgICBpc1JlY2l2ZWRNZXNzYWdlID0gZmFsc2U7XG4gICAgdGV4dDtcbiAgICBpbWFnZTtcbiAgICBxdWlja1JlcGxpZXMgPSBbXVxuICAgIFxuICAgIC8qKlxuICAgICAqQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBNZXNzYWdlQ29tcG9uZW50LlxuICAgICAqIEBwYXJhbSB7RG9tU2FuaXRpemVyfSBzYW5pdGl6ZXJcbiAgICAgKiBAbWVtYmVyb2YgTWVzc2FnZUNvbXBvbmVudFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2FuaXRpemVyOkRvbVNhbml0aXplcikge1xuXG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTZXQgJ2lzUmVjaXZlZE1lc3NhZ2UnIGZsYWcgYmFzZWQgb24gbWVzc2FnZSBjYXRlZ29yeS5cbiAgICAgKiBBc3NpZ24gdmFsdWVzIHRvIHRleHQsIGltYWdlIGFuZCBxdWljayByZXBsaWVzIHZhcmlhYmxlcy4gXG4gICAgICogQ3VycmVudGx5IGltYWdlIGFuZCBxdWljayByZXBsaWVzIGFyZSBvbmx5IHVzZWQgZm9yIHJlY2VpdmVkIG1lc3NhZ2UuXG4gICAgICogQG1lbWJlcm9mIE1lc3NhZ2VDb21wb25lbnRcbiAgICAgKi9cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YSBSZXF1aXJlZCcpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWVzc2FnZS5nZXRDYXRlZ29yeSgpID09IE1FU1NBR0VfQ0FURUdPUlkuUkVDRUlWRUQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNSZWNpdmVkTWVzc2FnZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLm1lc3NhZ2UuZ2V0VGV4dCgpXG4gICAgICAgIHRoaXMuaW1hZ2UgPSB0aGlzLm1lc3NhZ2UuZ2V0SW1hZ2VVcmwoKVxuXG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2UgaW5zdGFuY2VvZiBSZWNlaXZlZE1lc3NhZ2UpIHsgIFxuICAgICAgICAgICAgdGhpcy5xdWlja1JlcGxpZXMgPSB0aGlzLm1lc3NhZ2UuZ2V0UXVpY2tSZXBsaWVzKClcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRW1pdCAnb25PcHRpb25DbGlja2VkJyBldmVudCB3aXRoICdvcHRpb24gdGV4dCcgcGF5bG9hZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25cbiAgICAgKiBAbWVtYmVyb2YgTWVzc2FnZUNvbXBvbmVudFxuICAgICAqL1xuICAgIG9wdGlvbkNsaWNrZWQob3B0aW9uKSB7XG4gICAgICAgIHRoaXMub25PcHRpb25DbGlja2VkLmVtaXQob3B0aW9uKVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogU2V0IG1vdXNlb3ZlciBIb3N0QmluZGluZyBmb3IgbWVzc2FnZSBjb21wb25lbnRcbiAgICAgKiBUaGlzIHNldHMgQm94U2hhZG93IG9mIGNvbXBvbmVudCBvbiAnaG92ZXInXG4gICAgICogQG1lbWJlcm9mIE1lc3NhZ2VDb21wb25lbnRcbiAgICAgKi9cbiAgICBASG9zdExpc3RlbmVyKCdtb3VzZW92ZXInKSBvbk1vdXNlT3ZlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNpdmVkTWVzc2FnZSkge1xuICAgICAgICAgICAgdGhpcy5ib3hTaGFkb3cgPSB0aGlzLnNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0U3R5bGUoJzFweCAycHggOHB4IHJnYmEoMzMsMzMsMzMsLjQpJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYm94U2hhZG93ID0gdGhpcy5zYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKCctMnB4IDJweCA4cHggcmdiYSgzMywzMywzMywuNCknKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgIC8qKlxuICAgICAqIFNldCBtb3VzZWxlYXZlIEhvc3RCaW5kaW5nIGZvciBtZXNzYWdlIGNvbXBvbmVudFxuICAgICAqIFRoaXMgcmVtb3ZlcyBCb3hTaGFkb3cgb2YgY29tcG9uZW50LlxuICAgICAqIEBtZW1iZXJvZiBNZXNzYWdlQ29tcG9uZW50XG4gICAgICovXG4gICAgQEhvc3RMaXN0ZW5lcignbW91c2VsZWF2ZScpIG9uTW91c2VMZWF2ZSgpIHtcbiAgICAgICAgdGhpcy5ib3hTaGFkb3cgPSAnbm9uZSdcbiAgICB9XG59Il19