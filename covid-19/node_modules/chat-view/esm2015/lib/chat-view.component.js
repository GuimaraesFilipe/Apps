import * as tslib_1 from "tslib";
import { query, stagger, style, transition, trigger, useAnimation } from '@angular/animations';
import { Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { messagePushAnimation } from './animations/animations';
let ChatViewComponent = 
/**
 * This is only componet that needs to be added while integrating chat-view library.
 * Parent component of chat messages, chat header and chat input
 * Input : Array of ReceivedMessage and SentMessage
 * Input : IChatViewOptions : Set style properties of ReceivedMessage, SentMessage, header, chat input, quick replies
 * Output: onOptionClicked event emitter : Triggered when user clicks one of the quick replies
 * Output: onInput event emitter : Triggered when user clicks of send button
 *
 * @export
 * @class ChatViewComponent
 * @implements {OnInit}
 */
class ChatViewComponent {
    constructor() {
        /**
         * Input messages (recieved or sent) array passed to component.
         * @type {(ReceivedMessage[] | SentMessage[])}
         * @memberof ChatViewComponent
         */
        this.messages = [];
        /**
         * Input property to set styling options to chat-view compoenents
         * @type {IChatViewOptions}
         * @memberof ChatViewComponent
         */
        this.options = {
            //Set background color and text color of SentMessage
            sentMessage: {
                textColor: 'white',
                backgroundColor: '#c7ac7b',
            },
            //Set background color and text color of ReceivedMessage
            receivedMessage: {
                textColor: 'black',
                backgroundColor: 'white',
            },
            //Set background color and text color of ChatHeader
            header: {
                textColor: 'white',
                backgroundColor: '#71a7de'
            },
            //Set border color, text color, max input length, send icon color and background color of input box
            inputBox: {
                borderColor: 'gray',
                textColor: 'black',
                maxLength: 50,
                sendIconColor: '#5e8dbd',
                backgroundColor: '#e1faf8'
            },
            //Set text color, background color and border color of quick replies
            quickReplies: {
                textColor: 'white',
                backgroundColor: '#c7ac7b',
                borderColor: '#c7ac7b'
            },
            //Set background color of chatlist pane
            chatlistBackgroundColor: '#e1faf8',
        };
        /**
         * Event emitter for quick replies are clicked
         * @memberof ChatViewComponent
         */
        this.onOptionClicked = new EventEmitter();
        /**
         * Event emitter when send button is clicked
         * @memberof ChatViewComponent
         */
        this.onInput = new EventEmitter();
        //messages array to keep track of previous messages.
        //This is used in ngDoCheck() top scroll chatview if new message is added.
        this.oldMessages = [];
    }
    /**
     * Event emitter when send button is clicked.
     * Parent copmponent will recived users query. Then it can be added in sent message array.
     * @param {*} text
     * @memberof ChatViewComponent
     */
    sendMessage(text) {
        this.onInput.emit(text);
    }
    /**
     * Event emitter when quick replies are clicked.
     * Parent copmponent will recived selected option. Then it can be added in sent message array.
     * @param {*} text
     * @memberof ChatViewComponent
     */
    optionClicked(option) {
        this.onInput.emit(option);
    }
    /**
     * To scroll chatlist to the bottom
     * @memberof ChatViewComponent
     */
    scrollToBottom() {
        setTimeout(() => {
            this.chatlist.nativeElement.scrollTop = this.chatlist.nativeElement.scrollHeight;
        }, 0);
    }
    /**
     * After every change detection cycle, check if new message is added in message array.
     * If yes, then scroll chat list to bottom.
     * @memberof ChatViewComponent
     */
    ngDoCheck() {
        if (this.messages && this.messages.length != this.oldMessages.length) {
            this.scrollToBottom();
        }
        this.oldMessages = [...this.messages];
    }
};
tslib_1.__decorate([
    ViewChild('chatlist', { static: false }),
    tslib_1.__metadata("design:type", ElementRef
    /**
     * Input messages (recieved or sent) array passed to component.
     * @type {(ReceivedMessage[] | SentMessage[])}
     * @memberof ChatViewComponent
     */
    )
], ChatViewComponent.prototype, "chatlist", void 0);
tslib_1.__decorate([
    Input('messages'),
    tslib_1.__metadata("design:type", Array)
], ChatViewComponent.prototype, "messages", void 0);
tslib_1.__decorate([
    Input('options'),
    tslib_1.__metadata("design:type", Object)
], ChatViewComponent.prototype, "options", void 0);
tslib_1.__decorate([
    Output('onOptionClicked'),
    tslib_1.__metadata("design:type", Object)
], ChatViewComponent.prototype, "onOptionClicked", void 0);
tslib_1.__decorate([
    Output('onInput'),
    tslib_1.__metadata("design:type", Object)
], ChatViewComponent.prototype, "onInput", void 0);
ChatViewComponent = tslib_1.__decorate([
    Component({
        selector: 'chat-view',
        template: "<div class=\"chat-container\">\n    <chat-header title=\"My Chat View\" [headerOptions]=\"options.header\"></chat-header>\n    <div #chatlist class=\"chat-list-wrapper\"\n      [@messageAddedAnimation]=\"messages.length\"\n      [style.backgroundColor]=\"options.chatlistBackgroundColor\"\n      >\n        <div  class=\"chat-list-item\" *ngFor=\"let message of messages;let i=index\">\n\n            <!--received Message-->\n            <div *ngIf=\"message.getCategory()=='received'\">\n                <received-message [message]=\"message\"\n                (onOptionClicked)=\"optionClicked($event)\" \n                [receivedMessageOptions]=\"options.receivedMessage\"\n                [quickRepliesOptions]=\"options.quickReplies\"\n                ></received-message>\n            </div>\n\n            <!--Sent Message-->\n            <div *ngIf=\"message.getCategory()=='sent'\">\n                <sent-message [message]=\"message\"\n                [sentMessageOptions]=\"options.sentMessage\"\n                ></sent-message>\n            </div>\n        </div>\n    </div>\n    <user-input (onInput)=\"sendMessage($event)\"\n    [options]=\"options.inputBox\"></user-input>\n</div>",
        animations: [
            trigger('messageAddedAnimation', [
                transition(':enter, * => 0, * => -1', []),
                transition(':increment', [
                    query(':enter', [
                        style({ opacity: 0 }),
                        stagger(100, [
                            useAnimation(messagePushAnimation, {
                                params: {
                                    opacity: 1,
                                    translateY: 10,
                                    time: '0.2s'
                                }
                            })
                        ]),
                    ], { optional: true })
                ]),
            ]),
        ],
        styles: ["div{color:red}.chat-container{width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:end;justify-content:flex-end}.chat-list-wrapper{-webkit-box-flex:1;flex:1 1 auto;overflow-y:scroll}.chat-list-wrapper .chat-list-item:first-child{margin-top:5px}.chat-list-wrapper .chat-list-item,.chat-list-wrapper received-message sent-message{margin-bottom:5px}chat-header{box-shadow:0 5px 11px #dbd9d9be;z-index:1}user-input{-webkit-box-flex:0;flex:0 0 auto;background:0 0;z-index:1}received-message,sent-message{display:block;width:100%}"]
    })
    /**
     * This is only componet that needs to be added while integrating chat-view library.
     * Parent component of chat messages, chat header and chat input
     * Input : Array of ReceivedMessage and SentMessage
     * Input : IChatViewOptions : Set style properties of ReceivedMessage, SentMessage, header, chat input, quick replies
     * Output: onOptionClicked event emitter : Triggered when user clicks one of the quick replies
     * Output: onInput event emitter : Triggered when user clicks of send button
     *
     * @export
     * @class ChatViewComponent
     * @implements {OnInit}
     */
    ,
    tslib_1.__metadata("design:paramtypes", [])
], ChatViewComponent);
export { ChatViewComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdC12aWV3LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2NoYXQtdmlldy8iLCJzb3VyY2VzIjpbImxpYi9jaGF0LXZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUMvRixPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdEcsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUF5Qy9ELElBQWEsaUJBQWlCO0FBWjlCOzs7Ozs7Ozs7OztHQVdHO0FBQ0gsTUFBYSxpQkFBaUI7SUE4RTVCO1FBcEVBOzs7O1dBSUc7UUFDZ0IsYUFBUSxHQUFzQyxFQUFFLENBQUM7UUFHcEU7Ozs7V0FJRztRQUNlLFlBQU8sR0FBcUI7WUFDNUMsb0RBQW9EO1lBQ3BELFdBQVcsRUFBRTtnQkFDWCxTQUFTLEVBQUUsT0FBTztnQkFDbEIsZUFBZSxFQUFFLFNBQVM7YUFDM0I7WUFFRCx3REFBd0Q7WUFDeEQsZUFBZSxFQUFFO2dCQUNmLFNBQVMsRUFBRSxPQUFPO2dCQUNsQixlQUFlLEVBQUUsT0FBTzthQUN6QjtZQUVBLG1EQUFtRDtZQUNwRCxNQUFNLEVBQUU7Z0JBQ04sU0FBUyxFQUFFLE9BQU87Z0JBQ2xCLGVBQWUsRUFBRSxTQUFTO2FBQzNCO1lBQ0EsbUdBQW1HO1lBQ3BHLFFBQVEsRUFBRTtnQkFDUixXQUFXLEVBQUUsTUFBTTtnQkFDbkIsU0FBUyxFQUFFLE9BQU87Z0JBQ2xCLFNBQVMsRUFBRSxFQUFFO2dCQUNiLGFBQWEsRUFBRSxTQUFTO2dCQUN4QixlQUFlLEVBQUUsU0FBUzthQUMzQjtZQUNELG9FQUFvRTtZQUNwRSxZQUFZLEVBQUU7Z0JBQ1osU0FBUyxFQUFFLE9BQU87Z0JBQ2xCLGVBQWUsRUFBRSxTQUFTO2dCQUMxQixXQUFXLEVBQUUsU0FBUzthQUN2QjtZQUVELHVDQUF1QztZQUN2Qyx1QkFBdUIsRUFBRSxTQUFTO1NBQ25DLENBQUE7UUFHRDs7O1dBR0c7UUFDd0Isb0JBQWUsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFBO1FBRy9EOzs7V0FHRztRQUNnQixZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQTtRQUUvQyxvREFBb0Q7UUFDcEQsMEVBQTBFO1FBQzFFLGdCQUFXLEdBQUcsRUFBRSxDQUFBO0lBR2hCLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILFdBQVcsQ0FBQyxJQUFJO1FBQ2QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDekIsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsYUFBYSxDQUFDLE1BQU07UUFDbEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDM0IsQ0FBQztJQUdEOzs7T0FHRztJQUNGLGNBQWM7UUFDYixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQTtRQUNsRixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFDUCxDQUFDO0lBR0Q7Ozs7T0FJRztJQUNILFNBQVM7UUFDUCxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUU7WUFDcEUsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFBO1NBQ3RCO1FBRUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQ3ZDLENBQUM7Q0FFRixDQUFBO0FBdkgyQztJQUF6QyxTQUFTLENBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDO3NDQUFXLFVBQVU7SUFHOUQ7Ozs7T0FJRzs7bURBUDJEO0FBUTNDO0lBQWxCLEtBQUssQ0FBQyxVQUFVLENBQUM7O21EQUFrRDtBQVFsRDtJQUFqQixLQUFLLENBQUMsU0FBUyxDQUFDOztrREFtQ2hCO0FBTzBCO0lBQTFCLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQzs7MERBQXFDO0FBTzVDO0lBQWxCLE1BQU0sQ0FBQyxTQUFTLENBQUM7O2tEQUE2QjtBQXhFcEMsaUJBQWlCO0lBckM3QixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsV0FBVztRQUNyQiwwckNBQXlDO1FBRXpDLFVBQVUsRUFBRTtZQUNWLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRTtnQkFDL0IsVUFBVSxDQUFDLHlCQUF5QixFQUFFLEVBQUUsQ0FBQztnQkFDekMsVUFBVSxDQUFDLFlBQVksRUFBRTtvQkFDdkIsS0FBSyxDQUFDLFFBQVEsRUFBRTt3QkFDZCxLQUFLLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7d0JBQ3JCLE9BQU8sQ0FBQyxHQUFHLEVBQUU7NEJBQ1gsWUFBWSxDQUFDLG9CQUFvQixFQUFFO2dDQUNqQyxNQUFNLEVBQUU7b0NBQ04sT0FBTyxFQUFFLENBQUM7b0NBQ1YsVUFBVSxFQUFFLEVBQUU7b0NBQ2QsSUFBSSxFQUFFLE1BQU07aUNBQ2I7NkJBQ0YsQ0FBQzt5QkFDSCxDQUFDO3FCQUNILEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7aUJBQ3ZCLENBQUM7YUFDSCxDQUFDO1NBQ0g7O0tBQ0YsQ0FBQztJQUVGOzs7Ozs7Ozs7OztPQVdHOzs7R0FDVSxpQkFBaUIsQ0E4SDdCO1NBOUhZLGlCQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHF1ZXJ5LCBzdGFnZ2VyLCBzdHlsZSwgdHJhbnNpdGlvbiwgdHJpZ2dlciwgdXNlQW5pbWF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IG1lc3NhZ2VQdXNoQW5pbWF0aW9uIH0gZnJvbSAnLi9hbmltYXRpb25zL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgUmVjZWl2ZWRNZXNzYWdlLCBTZW50TWVzc2FnZSB9IGZyb20gJy4vY29tcG9uZW50cy9tZXNzYWdlLWRhdGEvbWVzc2FnZS1kYXRhJztcblxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjaGF0LXZpZXcnLFxuICB0ZW1wbGF0ZVVybDogJy4vY2hhdC12aWV3LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vY2hhdC12aWV3LmNvbXBvbmVudC5zY3NzJ10sXG4gIGFuaW1hdGlvbnM6IFtcbiAgICB0cmlnZ2VyKCdtZXNzYWdlQWRkZWRBbmltYXRpb24nLCBbXG4gICAgICB0cmFuc2l0aW9uKCc6ZW50ZXIsICogPT4gMCwgKiA9PiAtMScsIFtdKSxcbiAgICAgIHRyYW5zaXRpb24oJzppbmNyZW1lbnQnLCBbXG4gICAgICAgIHF1ZXJ5KCc6ZW50ZXInLCBbXG4gICAgICAgICAgc3R5bGUoeyBvcGFjaXR5OiAwIH0pLFxuICAgICAgICAgIHN0YWdnZXIoMTAwLCBbXG4gICAgICAgICAgICB1c2VBbmltYXRpb24obWVzc2FnZVB1c2hBbmltYXRpb24sIHtcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVZOiAxMCxcbiAgICAgICAgICAgICAgICB0aW1lOiAnMC4ycydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICBdKSxcbiAgICAgICAgXSwgeyBvcHRpb25hbDogdHJ1ZSB9KVxuICAgICAgXSksXG4gICAgXSksXG4gIF1cbn0pXG5cbi8qKlxuICogVGhpcyBpcyBvbmx5IGNvbXBvbmV0IHRoYXQgbmVlZHMgdG8gYmUgYWRkZWQgd2hpbGUgaW50ZWdyYXRpbmcgY2hhdC12aWV3IGxpYnJhcnkuXG4gKiBQYXJlbnQgY29tcG9uZW50IG9mIGNoYXQgbWVzc2FnZXMsIGNoYXQgaGVhZGVyIGFuZCBjaGF0IGlucHV0XG4gKiBJbnB1dCA6IEFycmF5IG9mIFJlY2VpdmVkTWVzc2FnZSBhbmQgU2VudE1lc3NhZ2VcbiAqIElucHV0IDogSUNoYXRWaWV3T3B0aW9ucyA6IFNldCBzdHlsZSBwcm9wZXJ0aWVzIG9mIFJlY2VpdmVkTWVzc2FnZSwgU2VudE1lc3NhZ2UsIGhlYWRlciwgY2hhdCBpbnB1dCwgcXVpY2sgcmVwbGllc1xuICogT3V0cHV0OiBvbk9wdGlvbkNsaWNrZWQgZXZlbnQgZW1pdHRlciA6IFRyaWdnZXJlZCB3aGVuIHVzZXIgY2xpY2tzIG9uZSBvZiB0aGUgcXVpY2sgcmVwbGllc1xuICogT3V0cHV0OiBvbklucHV0IGV2ZW50IGVtaXR0ZXIgOiBUcmlnZ2VyZWQgd2hlbiB1c2VyIGNsaWNrcyBvZiBzZW5kIGJ1dHRvblxuICogXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgQ2hhdFZpZXdDb21wb25lbnRcbiAqIEBpbXBsZW1lbnRzIHtPbkluaXR9XG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0Vmlld0NvbXBvbmVudCB7XG5cbiAgLyoqXG4gICAqIEVsZW1lbnRSZWYgZm9yIGNoYXRsaXN0IHRvIGhhbmRsZSBzY3JvbGxpbmdcbiAgICogQHR5cGUge0VsZW1lbnRSZWZ9XG4gICAqIEBtZW1iZXJvZiBDaGF0Vmlld0NvbXBvbmVudFxuICAgKi9cbiAgQFZpZXdDaGlsZCgnY2hhdGxpc3QnLCB7IHN0YXRpYzogZmFsc2UgfSkgY2hhdGxpc3Q6IEVsZW1lbnRSZWZcblxuXG4gIC8qKlxuICAgKiBJbnB1dCBtZXNzYWdlcyAocmVjaWV2ZWQgb3Igc2VudCkgYXJyYXkgcGFzc2VkIHRvIGNvbXBvbmVudC5cbiAgICogQHR5cGUgeyhSZWNlaXZlZE1lc3NhZ2VbXSB8IFNlbnRNZXNzYWdlW10pfVxuICAgKiBAbWVtYmVyb2YgQ2hhdFZpZXdDb21wb25lbnRcbiAgICovXG4gIEBJbnB1dCgnbWVzc2FnZXMnKSBtZXNzYWdlczogKFJlY2VpdmVkTWVzc2FnZSB8IFNlbnRNZXNzYWdlKVtdID0gW107XG5cblxuICAvKipcbiAgICogSW5wdXQgcHJvcGVydHkgdG8gc2V0IHN0eWxpbmcgb3B0aW9ucyB0byBjaGF0LXZpZXcgY29tcG9lbmVudHNcbiAgICogQHR5cGUge0lDaGF0Vmlld09wdGlvbnN9XG4gICAqIEBtZW1iZXJvZiBDaGF0Vmlld0NvbXBvbmVudFxuICAgKi9cbiAgQElucHV0KCdvcHRpb25zJykgb3B0aW9uczogSUNoYXRWaWV3T3B0aW9ucyA9IHtcbiAgICAvL1NldCBiYWNrZ3JvdW5kIGNvbG9yIGFuZCB0ZXh0IGNvbG9yIG9mIFNlbnRNZXNzYWdlXG4gICAgc2VudE1lc3NhZ2U6IHsgIFxuICAgICAgdGV4dENvbG9yOiAnd2hpdGUnLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2M3YWM3YicsXG4gICAgfSxcblxuICAgIC8vU2V0IGJhY2tncm91bmQgY29sb3IgYW5kIHRleHQgY29sb3Igb2YgUmVjZWl2ZWRNZXNzYWdlXG4gICAgcmVjZWl2ZWRNZXNzYWdlOiB7XG4gICAgICB0ZXh0Q29sb3I6ICdibGFjaycsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgfSxcblxuICAgICAvL1NldCBiYWNrZ3JvdW5kIGNvbG9yIGFuZCB0ZXh0IGNvbG9yIG9mIENoYXRIZWFkZXJcbiAgICBoZWFkZXI6IHtcbiAgICAgIHRleHRDb2xvcjogJ3doaXRlJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJyM3MWE3ZGUnXG4gICAgfSxcbiAgICAgLy9TZXQgYm9yZGVyIGNvbG9yLCB0ZXh0IGNvbG9yLCBtYXggaW5wdXQgbGVuZ3RoLCBzZW5kIGljb24gY29sb3IgYW5kIGJhY2tncm91bmQgY29sb3Igb2YgaW5wdXQgYm94XG4gICAgaW5wdXRCb3g6IHtcbiAgICAgIGJvcmRlckNvbG9yOiAnZ3JheScsXG4gICAgICB0ZXh0Q29sb3I6ICdibGFjaycsXG4gICAgICBtYXhMZW5ndGg6IDUwLFxuICAgICAgc2VuZEljb25Db2xvcjogJyM1ZThkYmQnLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2UxZmFmOCdcbiAgICB9LFxuICAgIC8vU2V0IHRleHQgY29sb3IsIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBjb2xvciBvZiBxdWljayByZXBsaWVzXG4gICAgcXVpY2tSZXBsaWVzOiB7XG4gICAgICB0ZXh0Q29sb3I6ICd3aGl0ZScsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjYzdhYzdiJyxcbiAgICAgIGJvcmRlckNvbG9yOiAnI2M3YWM3YidcbiAgICB9LFxuXG4gICAgLy9TZXQgYmFja2dyb3VuZCBjb2xvciBvZiBjaGF0bGlzdCBwYW5lXG4gICAgY2hhdGxpc3RCYWNrZ3JvdW5kQ29sb3I6ICcjZTFmYWY4JyxcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEV2ZW50IGVtaXR0ZXIgZm9yIHF1aWNrIHJlcGxpZXMgYXJlIGNsaWNrZWRcbiAgICogQG1lbWJlcm9mIENoYXRWaWV3Q29tcG9uZW50XG4gICAqL1xuICBAT3V0cHV0KCdvbk9wdGlvbkNsaWNrZWQnKSBvbk9wdGlvbkNsaWNrZWQgPSBuZXcgRXZlbnRFbWl0dGVyKClcblxuXG4gIC8qKlxuICAgKiBFdmVudCBlbWl0dGVyIHdoZW4gc2VuZCBidXR0b24gaXMgY2xpY2tlZFxuICAgKiBAbWVtYmVyb2YgQ2hhdFZpZXdDb21wb25lbnRcbiAgICovXG4gIEBPdXRwdXQoJ29uSW5wdXQnKSBvbklucHV0ID0gbmV3IEV2ZW50RW1pdHRlcigpXG5cbiAgLy9tZXNzYWdlcyBhcnJheSB0byBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIG1lc3NhZ2VzLlxuICAvL1RoaXMgaXMgdXNlZCBpbiBuZ0RvQ2hlY2soKSB0b3Agc2Nyb2xsIGNoYXR2aWV3IGlmIG5ldyBtZXNzYWdlIGlzIGFkZGVkLlxuICBvbGRNZXNzYWdlcyA9IFtdXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZW1pdHRlciB3aGVuIHNlbmQgYnV0dG9uIGlzIGNsaWNrZWQuXG4gICAqIFBhcmVudCBjb3BtcG9uZW50IHdpbGwgcmVjaXZlZCB1c2VycyBxdWVyeS4gVGhlbiBpdCBjYW4gYmUgYWRkZWQgaW4gc2VudCBtZXNzYWdlIGFycmF5LlxuICAgKiBAcGFyYW0geyp9IHRleHRcbiAgICogQG1lbWJlcm9mIENoYXRWaWV3Q29tcG9uZW50XG4gICAqL1xuICBzZW5kTWVzc2FnZSh0ZXh0KSB7XG4gICAgdGhpcy5vbklucHV0LmVtaXQodGV4dClcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBlbWl0dGVyIHdoZW4gcXVpY2sgcmVwbGllcyBhcmUgY2xpY2tlZC5cbiAgICogUGFyZW50IGNvcG1wb25lbnQgd2lsbCByZWNpdmVkIHNlbGVjdGVkIG9wdGlvbi4gVGhlbiBpdCBjYW4gYmUgYWRkZWQgaW4gc2VudCBtZXNzYWdlIGFycmF5LlxuICAgKiBAcGFyYW0geyp9IHRleHRcbiAgICogQG1lbWJlcm9mIENoYXRWaWV3Q29tcG9uZW50XG4gICAqL1xuICBvcHRpb25DbGlja2VkKG9wdGlvbikge1xuICAgIHRoaXMub25JbnB1dC5lbWl0KG9wdGlvbilcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFRvIHNjcm9sbCBjaGF0bGlzdCB0byB0aGUgYm90dG9tXG4gICAqIEBtZW1iZXJvZiBDaGF0Vmlld0NvbXBvbmVudFxuICAgKi9cbiAgIHNjcm9sbFRvQm90dG9tKCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jaGF0bGlzdC5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuY2hhdGxpc3QubmF0aXZlRWxlbWVudC5zY3JvbGxIZWlnaHRcbiAgICB9LCAwKVxuICB9XG5cblxuICAvKipcbiAgICogQWZ0ZXIgZXZlcnkgY2hhbmdlIGRldGVjdGlvbiBjeWNsZSwgY2hlY2sgaWYgbmV3IG1lc3NhZ2UgaXMgYWRkZWQgaW4gbWVzc2FnZSBhcnJheS5cbiAgICogSWYgeWVzLCB0aGVuIHNjcm9sbCBjaGF0IGxpc3QgdG8gYm90dG9tLlxuICAgKiBAbWVtYmVyb2YgQ2hhdFZpZXdDb21wb25lbnRcbiAgICovXG4gIG5nRG9DaGVjaygpIHtcbiAgICBpZiAodGhpcy5tZXNzYWdlcyAmJiB0aGlzLm1lc3NhZ2VzLmxlbmd0aCAhPSB0aGlzLm9sZE1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpXG4gICAgfVxuXG4gICAgdGhpcy5vbGRNZXNzYWdlcyA9IFsuLi50aGlzLm1lc3NhZ2VzXVxuICB9XG5cbn1cblxuLyoqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIElDaGF0Vmlld09wdGlvbnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ2hhdFZpZXdPcHRpb25zIHtcbiAgc2VudE1lc3NhZ2U/OiBJQ2hhdE1lc3NhZ2VPcHRpb24sXG4gIHJlY2VpdmVkTWVzc2FnZT86IElDaGF0TWVzc2FnZU9wdGlvbixcbiAgaGVhZGVyPzogSUNoYXRNZXNzYWdlT3B0aW9uLFxuICBpbnB1dEJveD86IHtcbiAgICBib3JkZXJDb2xvcjogc3RyaW5nLFxuICAgIHRleHRDb2xvcjogc3RyaW5nLFxuICAgIG1heExlbmd0aD86IG51bWJlcixcbiAgICBzZW5kSWNvbkNvbG9yOiBzdHJpbmcsXG4gICAgYmFja2dyb3VuZENvbG9yOiBzdHJpbmdcbiAgfSxcbiAgcXVpY2tSZXBsaWVzPzoge1xuICAgIHRleHRDb2xvcj86IHN0cmluZyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmcsXG4gICAgYm9yZGVyQ29sb3I/OiBzdHJpbmdcbiAgfSxcbiAgY2hhdGxpc3RCYWNrZ3JvdW5kQ29sb3I6IHN0cmluZyxcblxufVxuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIElDaGF0TWVzc2FnZU9wdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIElDaGF0TWVzc2FnZU9wdGlvbiB7XG4gIHRleHRDb2xvcj86IHN0cmluZyxcbiAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nLFxufSJdfQ==